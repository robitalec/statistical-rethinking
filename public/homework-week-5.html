<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Homework: Week 5 | Learning bayesian data analysis with Statistical Rethinking</title>
  <meta name="description" content="6 Homework: Week 5 | Learning bayesian data analysis with Statistical Rethinking" />
  <meta name="generator" content="bookdown 0.22.15 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Homework: Week 5 | Learning bayesian data analysis with Statistical Rethinking" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Homework: Week 5 | Learning bayesian data analysis with Statistical Rethinking" />
  
  
  

<meta name="author" content="Alec L. Robitaille" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="homework-week-4.html"/>
<link rel="next" href="lecture-01.html"/>
<script src="libs/header-attrs-2.9.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#links"><i class="fa fa-check"></i><b>1.1</b> Links</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#adaptations"><i class="fa fa-check"></i><b>1.1.1</b> Adaptations</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#etc"><i class="fa fa-check"></i><b>1.1.2</b> Etc</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#seed"><i class="fa fa-check"></i><b>1.2</b> Seed</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="homework-week-1.html"><a href="homework-week-1.html"><i class="fa fa-check"></i><b>2</b> Homework: Week 1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="homework-week-1.html"><a href="homework-week-1.html#variables"><i class="fa fa-check"></i><b>2.1</b> Variables</a></li>
<li class="chapter" data-level="2.2" data-path="homework-week-1.html"><a href="homework-week-1.html#joint-model"><i class="fa fa-check"></i><b>2.2</b> Joint model</a></li>
<li class="chapter" data-level="2.3" data-path="homework-week-1.html"><a href="homework-week-1.html#question-1"><i class="fa fa-check"></i><b>2.3</b> Question 1</a></li>
<li class="chapter" data-level="2.4" data-path="homework-week-1.html"><a href="homework-week-1.html#question-2"><i class="fa fa-check"></i><b>2.4</b> Question 2</a></li>
<li class="chapter" data-level="2.5" data-path="homework-week-1.html"><a href="homework-week-1.html#question-3"><i class="fa fa-check"></i><b>2.5</b> Question 3</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="homework-week-2.html"><a href="homework-week-2.html"><i class="fa fa-check"></i><b>3</b> Homework: Week 2</a>
<ul>
<li class="chapter" data-level="3.1" data-path="homework-week-2.html"><a href="homework-week-2.html#question-1-1"><i class="fa fa-check"></i><b>3.1</b> Question 1</a></li>
<li class="chapter" data-level="3.2" data-path="homework-week-2.html"><a href="homework-week-2.html#question-2-1"><i class="fa fa-check"></i><b>3.2</b> Question 2</a></li>
<li class="chapter" data-level="3.3" data-path="homework-week-2.html"><a href="homework-week-2.html#homework-question-3"><i class="fa fa-check"></i><b>3.3</b> Homework: Question 3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="homework-week-3.html"><a href="homework-week-3.html"><i class="fa fa-check"></i><b>4</b> Homework: Week 3</a>
<ul>
<li class="chapter" data-level="4.1" data-path="homework-week-3.html"><a href="homework-week-3.html#overview-1"><i class="fa fa-check"></i><b>4.1</b> Overview</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="homework-week-3.html"><a href="homework-week-3.html#setup"><i class="fa fa-check"></i><b>4.1.1</b> Setup</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="homework-week-3.html"><a href="homework-week-3.html#question-1-2"><i class="fa fa-check"></i><b>4.2</b> Question 1</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="homework-week-3.html"><a href="homework-week-3.html#workings"><i class="fa fa-check"></i><b>4.2.1</b> Workings</a></li>
<li class="chapter" data-level="4.2.2" data-path="homework-week-3.html"><a href="homework-week-3.html#model"><i class="fa fa-check"></i><b>4.2.2</b> Model</a></li>
<li class="chapter" data-level="4.2.3" data-path="homework-week-3.html"><a href="homework-week-3.html#prior-predictive-simulation"><i class="fa fa-check"></i><b>4.2.3</b> Prior predictive simulation</a></li>
<li class="chapter" data-level="4.2.4" data-path="homework-week-3.html"><a href="homework-week-3.html#paths"><i class="fa fa-check"></i><b>4.2.4</b> Paths</a></li>
<li class="chapter" data-level="4.2.5" data-path="homework-week-3.html"><a href="homework-week-3.html#interpretation"><i class="fa fa-check"></i><b>4.2.5</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="homework-week-3.html"><a href="homework-week-3.html#question-2-2"><i class="fa fa-check"></i><b>4.3</b> Question 2</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="homework-week-3.html"><a href="homework-week-3.html#paths-1"><i class="fa fa-check"></i><b>4.3.1</b> Paths</a></li>
<li class="chapter" data-level="4.3.2" data-path="homework-week-3.html"><a href="homework-week-3.html#model-1"><i class="fa fa-check"></i><b>4.3.2</b> Model</a></li>
<li class="chapter" data-level="4.3.3" data-path="homework-week-3.html"><a href="homework-week-3.html#interpretation-1"><i class="fa fa-check"></i><b>4.3.3</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="homework-week-3.html"><a href="homework-week-3.html#question-3-1"><i class="fa fa-check"></i><b>4.4</b> Question 3</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="homework-week-3.html"><a href="homework-week-3.html#paths-2"><i class="fa fa-check"></i><b>4.4.1</b> Paths</a></li>
<li class="chapter" data-level="4.4.2" data-path="homework-week-3.html"><a href="homework-week-3.html#interpretation-2"><i class="fa fa-check"></i><b>4.4.2</b> Interpretation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="homework-week-4.html"><a href="homework-week-4.html"><i class="fa fa-check"></i><b>5</b> Homework: Week 4</a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="homework-week-4.html"><a href="homework-week-4.html#setup-1"><i class="fa fa-check"></i><b>5.0.1</b> Setup</a></li>
<li class="chapter" data-level="5.1" data-path="homework-week-4.html"><a href="homework-week-4.html#question-1-3"><i class="fa fa-check"></i><b>5.1</b> Question 1</a></li>
<li class="chapter" data-level="5.2" data-path="homework-week-4.html"><a href="homework-week-4.html#question-2-3"><i class="fa fa-check"></i><b>5.2</b> Question 2</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="homework-week-4.html"><a href="homework-week-4.html#dag"><i class="fa fa-check"></i><b>5.2.1</b> DAG</a></li>
<li class="chapter" data-level="5.2.2" data-path="homework-week-4.html"><a href="homework-week-4.html#data"><i class="fa fa-check"></i><b>5.2.2</b> Data</a></li>
<li class="chapter" data-level="5.2.3" data-path="homework-week-4.html"><a href="homework-week-4.html#models"><i class="fa fa-check"></i><b>5.2.3</b> Models</a></li>
<li class="chapter" data-level="5.2.4" data-path="homework-week-4.html"><a href="homework-week-4.html#interpretation-3"><i class="fa fa-check"></i><b>5.2.4</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="homework-week-4.html"><a href="homework-week-4.html#question-3-2"><i class="fa fa-check"></i><b>5.3</b> Question 3</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="homework-week-4.html"><a href="homework-week-4.html#data-1"><i class="fa fa-check"></i><b>5.3.1</b> Data</a></li>
<li class="chapter" data-level="5.3.2" data-path="homework-week-4.html"><a href="homework-week-4.html#models-1"><i class="fa fa-check"></i><b>5.3.2</b> Models</a></li>
<li class="chapter" data-level="5.3.3" data-path="homework-week-4.html"><a href="homework-week-4.html#dag-1"><i class="fa fa-check"></i><b>5.3.3</b> DAG</a></li>
<li class="chapter" data-level="5.3.4" data-path="homework-week-4.html"><a href="homework-week-4.html#interpretation-4"><i class="fa fa-check"></i><b>5.3.4</b> Interpretation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="homework-week-5.html"><a href="homework-week-5.html"><i class="fa fa-check"></i><b>6</b> Homework: Week 5</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="homework-week-5.html"><a href="homework-week-5.html#setup-2"><i class="fa fa-check"></i><b>6.0.1</b> Setup</a></li>
<li class="chapter" data-level="6.1" data-path="homework-week-5.html"><a href="homework-week-5.html#question-1-4"><i class="fa fa-check"></i><b>6.1</b> Question 1</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="homework-week-5.html"><a href="homework-week-5.html#data-2"><i class="fa fa-check"></i><b>6.1.1</b> Data</a></li>
<li class="chapter" data-level="6.1.2" data-path="homework-week-5.html"><a href="homework-week-5.html#prior-predictive-simulation-1"><i class="fa fa-check"></i><b>6.1.2</b> Prior predictive simulation</a></li>
<li class="chapter" data-level="6.1.3" data-path="homework-week-5.html"><a href="homework-week-5.html#model-2"><i class="fa fa-check"></i><b>6.1.3</b> Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lecture-01.html"><a href="lecture-01.html"><i class="fa fa-check"></i><b>7</b> Lecture 01</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="lecture-01.html"><a href="lecture-01.html#popper"><i class="fa fa-check"></i><b>7.0.1</b> Popper</a></li>
<li class="chapter" data-level="7.0.2" data-path="lecture-01.html"><a href="lecture-01.html#approach"><i class="fa fa-check"></i><b>7.0.2</b> Approach</a></li>
<li class="chapter" data-level="7.1" data-path="lecture-01.html"><a href="lecture-01.html#hypotheses---process-models---statistical-models"><i class="fa fa-check"></i><b>7.1</b> Hypotheses - Process Models - Statistical Models</a></li>
<li class="chapter" data-level="7.2" data-path="lecture-01.html"><a href="lecture-01.html#small-world-large-world"><i class="fa fa-check"></i><b>7.2</b> Small world / large world</a></li>
<li class="chapter" data-level="7.3" data-path="lecture-01.html"><a href="lecture-01.html#example-four-marbles"><i class="fa fa-check"></i><b>7.3</b> Example: four marbles</a></li>
<li class="chapter" data-level="7.4" data-path="lecture-01.html"><a href="lecture-01.html#building-a-model"><i class="fa fa-check"></i><b>7.4</b> Building a model</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lecture-02.html"><a href="lecture-02.html"><i class="fa fa-check"></i><b>8</b> Lecture 02</a>
<ul>
<li class="chapter" data-level="8.1" data-path="lecture-02.html"><a href="lecture-02.html#joint-prior-distribution"><i class="fa fa-check"></i><b>8.1</b> Joint prior distribution</a></li>
<li class="chapter" data-level="8.2" data-path="lecture-02.html"><a href="lecture-02.html#example-inflatable-world"><i class="fa fa-check"></i><b>8.2</b> Example: inflatable world</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="lecture-02.html"><a href="lecture-02.html#design-the-model"><i class="fa fa-check"></i><b>8.2.1</b> <strong>Design the model</strong></a></li>
<li class="chapter" data-level="8.2.2" data-path="lecture-02.html"><a href="lecture-02.html#condition"><i class="fa fa-check"></i><b>8.2.2</b> <strong>Condition</strong></a></li>
<li class="chapter" data-level="8.2.3" data-path="lecture-02.html"><a href="lecture-02.html#evaluate"><i class="fa fa-check"></i><b>8.2.3</b> <strong>Evaluate</strong></a></li>
<li class="chapter" data-level="8.2.4" data-path="lecture-02.html"><a href="lecture-02.html#define-parameters"><i class="fa fa-check"></i><b>8.2.4</b> Define parameters</a></li>
<li class="chapter" data-level="8.2.5" data-path="lecture-02.html"><a href="lecture-02.html#joint-model-1"><i class="fa fa-check"></i><b>8.2.5</b> Joint model</a></li>
<li class="chapter" data-level="8.2.6" data-path="lecture-02.html"><a href="lecture-02.html#posterior"><i class="fa fa-check"></i><b>8.2.6</b> Posterior</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="lecture-02.html"><a href="lecture-02.html#grid-approximation"><i class="fa fa-check"></i><b>8.3</b> Grid approximation</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="lecture-02.html"><a href="lecture-02.html#sampling-from-the-posterior"><i class="fa fa-check"></i><b>8.3.1</b> Sampling from the posterior</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lecture-03.html"><a href="lecture-03.html"><i class="fa fa-check"></i><b>9</b> Lecture 03</a>
<ul>
<li class="chapter" data-level="9.1" data-path="lecture-03.html"><a href="lecture-03.html#regressions"><i class="fa fa-check"></i><b>9.1</b> Regressions</a></li>
<li class="chapter" data-level="9.2" data-path="lecture-03.html"><a href="lecture-03.html#normal-distributions"><i class="fa fa-check"></i><b>9.2</b> Normal distributions</a></li>
<li class="chapter" data-level="9.3" data-path="lecture-03.html"><a href="lecture-03.html#prior-predictive-distributions"><i class="fa fa-check"></i><b>9.3</b> Prior predictive distributions</a></li>
<li class="chapter" data-level="9.4" data-path="lecture-03.html"><a href="lecture-03.html#quadratic-approximate"><i class="fa fa-check"></i><b>9.4</b> Quadratic approximate</a></li>
<li class="chapter" data-level="9.5" data-path="lecture-03.html"><a href="lecture-03.html#centering-variables"><i class="fa fa-check"></i><b>9.5</b> Centering variables</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="lecture-04.html"><a href="lecture-04.html"><i class="fa fa-check"></i><b>10</b> Lecture 04</a>
<ul>
<li class="chapter" data-level="10.1" data-path="lecture-04.html"><a href="lecture-04.html#standardizing-variables"><i class="fa fa-check"></i><b>10.1</b> Standardizing variables</a></li>
<li class="chapter" data-level="10.2" data-path="lecture-04.html"><a href="lecture-04.html#plotting-uncertainty---sample-from-posterior"><i class="fa fa-check"></i><b>10.2</b> Plotting uncertainty - sample from posterior</a></li>
<li class="chapter" data-level="10.3" data-path="lecture-04.html"><a href="lecture-04.html#polynomials"><i class="fa fa-check"></i><b>10.3</b> Polynomials</a></li>
<li class="chapter" data-level="10.4" data-path="lecture-04.html"><a href="lecture-04.html#splines"><i class="fa fa-check"></i><b>10.4</b> Splines</a></li>
<li class="chapter" data-level="10.5" data-path="lecture-04.html"><a href="lecture-04.html#basis-splines"><i class="fa fa-check"></i><b>10.5</b> Basis splines</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="lecture-04.html"><a href="lecture-04.html#recipe"><i class="fa fa-check"></i><b>10.5.1</b> Recipe</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lecture-05.html"><a href="lecture-05.html"><i class="fa fa-check"></i><b>11</b> Lecture 05</a>
<ul>
<li class="chapter" data-level="11.1" data-path="lecture-05.html"><a href="lecture-05.html#multiple-regression-models"><i class="fa fa-check"></i><b>11.1</b> Multiple regression models</a></li>
<li class="chapter" data-level="11.2" data-path="lecture-05.html"><a href="lecture-05.html#directed-acyclic-graphs-dag"><i class="fa fa-check"></i><b>11.2</b> Directed acyclic graphs (DAG)</a></li>
<li class="chapter" data-level="11.3" data-path="lecture-05.html"><a href="lecture-05.html#example-age-marriage-divorce"><i class="fa fa-check"></i><b>11.3</b> Example: Age, marriage, divorce</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="lecture-05.html"><a href="lecture-05.html#priors"><i class="fa fa-check"></i><b>11.3.1</b> Priors</a></li>
<li class="chapter" data-level="11.3.2" data-path="lecture-05.html"><a href="lecture-05.html#prior-predictive-simulation-2"><i class="fa fa-check"></i><b>11.3.2</b> Prior predictive simulation</a></li>
<li class="chapter" data-level="11.3.3" data-path="lecture-05.html"><a href="lecture-05.html#interpretation-5"><i class="fa fa-check"></i><b>11.3.3</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="lecture-05.html"><a href="lecture-05.html#plotting-multivariate-posteriors"><i class="fa fa-check"></i><b>11.4</b> Plotting multivariate posteriors</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="lecture-05.html"><a href="lecture-05.html#posterior-predictive-checks"><i class="fa fa-check"></i><b>11.4.1</b> Posterior predictive checks</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="lecture-05.html"><a href="lecture-05.html#reveal-masked-associations"><i class="fa fa-check"></i><b>11.5</b> Reveal masked associations</a></li>
<li class="chapter" data-level="11.6" data-path="lecture-05.html"><a href="lecture-05.html#categorical-variables"><i class="fa fa-check"></i><b>11.6</b> Categorical variables</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="lecture-05.html"><a href="lecture-05.html#dummy-variable"><i class="fa fa-check"></i><b>11.6.1</b> Dummy variable</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="lecture-06.html"><a href="lecture-06.html"><i class="fa fa-check"></i><b>12</b> Lecture 06</a>
<ul>
<li class="chapter" data-level="12.1" data-path="lecture-06.html"><a href="lecture-06.html#index-variable"><i class="fa fa-check"></i><b>12.1</b> Index variable</a></li>
<li class="chapter" data-level="12.2" data-path="lecture-06.html"><a href="lecture-06.html#four-elemental-confounds"><i class="fa fa-check"></i><b>12.2</b> Four elemental confounds</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="lecture-06.html"><a href="lecture-06.html#notes"><i class="fa fa-check"></i><b>12.2.1</b> Notes</a></li>
<li class="chapter" data-level="12.2.2" data-path="lecture-06.html"><a href="lecture-06.html#the-fork"><i class="fa fa-check"></i><b>12.2.2</b> The fork</a></li>
<li class="chapter" data-level="12.2.3" data-path="lecture-06.html"><a href="lecture-06.html#the-path"><i class="fa fa-check"></i><b>12.2.3</b> The path</a></li>
<li class="chapter" data-level="12.2.4" data-path="lecture-06.html"><a href="lecture-06.html#the-collider"><i class="fa fa-check"></i><b>12.2.4</b> The collider</a></li>
<li class="chapter" data-level="12.2.5" data-path="lecture-06.html"><a href="lecture-06.html#steps"><i class="fa fa-check"></i><b>12.2.5</b> Steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="lecture-07.html"><a href="lecture-07.html"><i class="fa fa-check"></i><b>13</b> Lecture 07</a>
<ul>
<li class="chapter" data-level="13.1" data-path="lecture-07.html"><a href="lecture-07.html#four-elemental-confounds-continued"><i class="fa fa-check"></i><b>13.1</b> Four elemental confounds (continued)</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="lecture-07.html"><a href="lecture-07.html#unobserved-variables"><i class="fa fa-check"></i><b>13.1.1</b> Unobserved variables</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="lecture-07.html"><a href="lecture-07.html#over-fitting"><i class="fa fa-check"></i><b>13.2</b> Over fitting</a></li>
<li class="chapter" data-level="13.3" data-path="lecture-07.html"><a href="lecture-07.html#measuring-model-fit"><i class="fa fa-check"></i><b>13.3</b> Measuring model fit</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="lecture-07.html"><a href="lecture-07.html#r-squared"><i class="fa fa-check"></i><b>13.3.1</b> R squared</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="lecture-07.html"><a href="lecture-07.html#obtaining-the-regular-features"><i class="fa fa-check"></i><b>13.4</b> Obtaining the regular features</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="lecture-08.html"><a href="lecture-08.html"><i class="fa fa-check"></i><b>14</b> Lecture 08</a>
<ul>
<li class="chapter" data-level="14.1" data-path="lecture-08.html"><a href="lecture-08.html#information-theory"><i class="fa fa-check"></i><b>14.1</b> Information theory</a></li>
<li class="chapter" data-level="14.2" data-path="lecture-08.html"><a href="lecture-08.html#divergence"><i class="fa fa-check"></i><b>14.2</b> Divergence</a></li>
<li class="chapter" data-level="14.3" data-path="lecture-08.html"><a href="lecture-08.html#estimating-divergence"><i class="fa fa-check"></i><b>14.3</b> Estimating divergence</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="lecture-08.html"><a href="lecture-08.html#log-pointwise-predictive-density"><i class="fa fa-check"></i><b>14.3.1</b> Log pointwise predictive density</a></li>
<li class="chapter" data-level="14.3.2" data-path="lecture-08.html"><a href="lecture-08.html#deviance"><i class="fa fa-check"></i><b>14.3.2</b> Deviance</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="lecture-08.html"><a href="lecture-08.html#regularization"><i class="fa fa-check"></i><b>14.4</b> Regularization</a></li>
<li class="chapter" data-level="14.5" data-path="lecture-08.html"><a href="lecture-08.html#cross-validation"><i class="fa fa-check"></i><b>14.5</b> Cross validation</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="lecture-08.html"><a href="lecture-08.html#loo"><i class="fa fa-check"></i><b>14.5.1</b> LOO</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="lecture-08.html"><a href="lecture-08.html#information-criteria"><i class="fa fa-check"></i><b>14.6</b> Information criteria</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="lecture-08.html"><a href="lecture-08.html#waic"><i class="fa fa-check"></i><b>14.6.1</b> WAIC</a></li>
<li class="chapter" data-level="14.6.2" data-path="lecture-08.html"><a href="lecture-08.html#standard-error"><i class="fa fa-check"></i><b>14.6.2</b> Standard error</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="lecture-08.html"><a href="lecture-08.html#model-selection"><i class="fa fa-check"></i><b>14.7</b> Model selection</a></li>
<li class="chapter" data-level="14.8" data-path="lecture-08.html"><a href="lecture-08.html#model-comparison"><i class="fa fa-check"></i><b>14.8</b> Model comparison</a>
<ul>
<li class="chapter" data-level="14.8.1" data-path="lecture-08.html"><a href="lecture-08.html#example-1-model-mis-selection-using-waic"><i class="fa fa-check"></i><b>14.8.1</b> Example 1: model mis-selection using WAIC</a></li>
<li class="chapter" data-level="14.8.2" data-path="lecture-08.html"><a href="lecture-08.html#example-2-primate-lifetime"><i class="fa fa-check"></i><b>14.8.2</b> Example 2: primate lifetime</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="lecture-09.html"><a href="lecture-09.html"><i class="fa fa-check"></i><b>15</b> Lecture 09</a>
<ul>
<li class="chapter" data-level="15.1" data-path="lecture-09.html"><a href="lecture-09.html#conditioning"><i class="fa fa-check"></i><b>15.1</b> Conditioning</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="lecture-09.html"><a href="lecture-09.html#example-ruggedness"><i class="fa fa-check"></i><b>15.1.1</b> Example: ruggedness</a></li>
<li class="chapter" data-level="15.1.2" data-path="lecture-09.html"><a href="lecture-09.html#example-tulips"><i class="fa fa-check"></i><b>15.1.2</b> Example: tulips</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="lecture-09.html"><a href="lecture-09.html#interpreting-interactions"><i class="fa fa-check"></i><b>15.2</b> Interpreting interactions</a></li>
<li class="chapter" data-level="15.3" data-path="lecture-09.html"><a href="lecture-09.html#plotting-interactions"><i class="fa fa-check"></i><b>15.3</b> Plotting interactions</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="lecture-09.html"><a href="lecture-09.html#higher-order-interactions"><i class="fa fa-check"></i><b>15.3.1</b> Higher order interactions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="lecture-10.html"><a href="lecture-10.html"><i class="fa fa-check"></i><b>16</b> Lecture 10</a>
<ul>
<li class="chapter" data-level="16.1" data-path="lecture-10.html"><a href="lecture-10.html#markov-chain-monte-carlo"><i class="fa fa-check"></i><b>16.1</b> Markov Chain Monte Carlo</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="lecture-10.html"><a href="lecture-10.html#metropolis-algorithm"><i class="fa fa-check"></i><b>16.1.1</b> Metropolis algorithm</a></li>
<li class="chapter" data-level="16.1.2" data-path="lecture-10.html"><a href="lecture-10.html#metropolis-hastings"><i class="fa fa-check"></i><b>16.1.2</b> Metropolis Hastings</a></li>
<li class="chapter" data-level="16.1.3" data-path="lecture-10.html"><a href="lecture-10.html#gibbs-sampling"><i class="fa fa-check"></i><b>16.1.3</b> Gibbs sampling</a></li>
<li class="chapter" data-level="16.1.4" data-path="lecture-10.html"><a href="lecture-10.html#hamiltonian-monte-carlo"><i class="fa fa-check"></i><b>16.1.4</b> Hamiltonian Monte Carlo</a></li>
<li class="chapter" data-level="16.1.5" data-path="lecture-10.html"><a href="lecture-10.html#tuning-mcmc"><i class="fa fa-check"></i><b>16.1.5</b> Tuning MCMC</a></li>
<li class="chapter" data-level="16.1.6" data-path="lecture-10.html"><a href="lecture-10.html#stan"><i class="fa fa-check"></i><b>16.1.6</b> Stan</a></li>
<li class="chapter" data-level="16.1.7" data-path="lecture-10.html"><a href="lecture-10.html#ulam"><i class="fa fa-check"></i><b>16.1.7</b> ulam</a></li>
<li class="chapter" data-level="16.1.8" data-path="lecture-10.html"><a href="lecture-10.html#diagnosis"><i class="fa fa-check"></i><b>16.1.8</b> Diagnosis</a></li>
<li class="chapter" data-level="16.1.9" data-path="lecture-10.html"><a href="lecture-10.html#checking-the-chain"><i class="fa fa-check"></i><b>16.1.9</b> Checking the chain</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="lecture-11.html"><a href="lecture-11.html"><i class="fa fa-check"></i><b>17</b> Lecture 11</a>
<ul>
<li class="chapter" data-level="17.1" data-path="lecture-11.html"><a href="lecture-11.html#maximum-entropy"><i class="fa fa-check"></i><b>17.1</b> Maximum entropy</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="lecture-11.html"><a href="lecture-11.html#distributions"><i class="fa fa-check"></i><b>17.1.1</b> Distributions</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="lecture-11.html"><a href="lecture-11.html#generalized-linear-model"><i class="fa fa-check"></i><b>17.2</b> Generalized linear model</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="lecture-11.html"><a href="lecture-11.html#picking-a-distribution"><i class="fa fa-check"></i><b>17.2.1</b> Picking a distribution</a></li>
<li class="chapter" data-level="17.2.2" data-path="lecture-11.html"><a href="lecture-11.html#types-of-outcomes"><i class="fa fa-check"></i><b>17.2.2</b> Types of outcomes</a></li>
<li class="chapter" data-level="17.2.3" data-path="lecture-11.html"><a href="lecture-11.html#model-parameters-with-a-link-function"><i class="fa fa-check"></i><b>17.2.3</b> Model parameters with a link function</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="lecture-11.html"><a href="lecture-11.html#binomial-distribution"><i class="fa fa-check"></i><b>17.3</b> Binomial distribution</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="lecture-11.html"><a href="lecture-11.html#link"><i class="fa fa-check"></i><b>17.3.1</b> Link</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="lecture-12.html"><a href="lecture-12.html"><i class="fa fa-check"></i><b>18</b> Lecture 12</a>
<ul>
<li class="chapter" data-level="18.1" data-path="lecture-12.html"><a href="lecture-12.html#relative-and-absolute-effects"><i class="fa fa-check"></i><b>18.1</b> Relative and absolute effects</a></li>
<li class="chapter" data-level="18.2" data-path="lecture-12.html"><a href="lecture-12.html#logistic-regression"><i class="fa fa-check"></i><b>18.2</b> Logistic regression</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="lecture-13.html"><a href="lecture-13.html"><i class="fa fa-check"></i><b>19</b> Lecture 13</a>
<ul>
<li class="chapter" data-level="19.1" data-path="lecture-13.html"><a href="lecture-13.html#poisson"><i class="fa fa-check"></i><b>19.1</b> Poisson</a></li>
<li class="chapter" data-level="19.2" data-path="lecture-13.html"><a href="lecture-13.html#survival-analysis"><i class="fa fa-check"></i><b>19.2</b> Survival analysis</a></li>
<li class="chapter" data-level="19.3" data-path="lecture-13.html"><a href="lecture-13.html#monsters"><i class="fa fa-check"></i><b>19.3</b> Monsters</a></li>
<li class="chapter" data-level="19.4" data-path="lecture-13.html"><a href="lecture-13.html#mixtures"><i class="fa fa-check"></i><b>19.4</b> Mixtures</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="lecture-14.html"><a href="lecture-14.html"><i class="fa fa-check"></i><b>20</b> Lecture 14</a>
<ul>
<li class="chapter" data-level="20.1" data-path="lecture-14.html"><a href="lecture-14.html#ordered-categories"><i class="fa fa-check"></i><b>20.1</b> Ordered categories</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="lecture-15.html"><a href="lecture-15.html"><i class="fa fa-check"></i><b>21</b> Lecture 15</a>
<ul>
<li class="chapter" data-level="21.1" data-path="lecture-15.html"><a href="lecture-15.html#multilevel-models"><i class="fa fa-check"></i><b>21.1</b> Multilevel models</a></li>
<li class="chapter" data-level="21.2" data-path="lecture-15.html"><a href="lecture-15.html#varying-intercepts"><i class="fa fa-check"></i><b>21.2</b> Varying intercepts</a></li>
<li class="chapter" data-level="21.3" data-path="lecture-15.html"><a href="lecture-15.html#shrinkage"><i class="fa fa-check"></i><b>21.3</b> Shrinkage</a></li>
<li class="chapter" data-level="21.4" data-path="lecture-15.html"><a href="lecture-15.html#pooling"><i class="fa fa-check"></i><b>21.4</b> Pooling</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learning bayesian data analysis with Statistical Rethinking</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="homework-week-5" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Homework: Week 5</h1>
<p>2021-09-03 [updated: 2021-09-06]</p>
<div id="setup-2" class="section level3" number="6.0.1">
<h3><span class="header-section-number">6.0.1</span> Setup</h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="homework-week-5.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Packages</span></span>
<span id="cb76-2"><a href="homework-week-5.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdag)</span>
<span id="cb76-3"><a href="homework-week-5.html#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dagitty)</span>
<span id="cb76-4"><a href="homework-week-5.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb76-5"><a href="homework-week-5.html#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb76-6"><a href="homework-week-5.html#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidybayes)</span>
<span id="cb76-7"><a href="homework-week-5.html#cb76-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-8"><a href="homework-week-5.html#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Functions</span></span>
<span id="cb76-9"><a href="homework-week-5.html#cb76-9" aria-hidden="true" tabindex="-1"></a>dag_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(dag) {</span>
<span id="cb76-10"><a href="homework-week-5.html#cb76-10" aria-hidden="true" tabindex="-1"></a>    stat <span class="ot">&lt;-</span> <span class="fu">node_status</span>(dag, <span class="cn">FALSE</span>)</span>
<span id="cb76-11"><a href="homework-week-5.html#cb76-11" aria-hidden="true" tabindex="-1"></a>    stat<span class="sc">$</span>data<span class="sc">$</span>status[<span class="fu">is.na</span>(stat<span class="sc">$</span>data<span class="sc">$</span>status)] <span class="ot">&lt;-</span> <span class="st">&#39;intermediate&#39;</span></span>
<span id="cb76-12"><a href="homework-week-5.html#cb76-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(stat, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">xend =</span> xend, <span class="at">yend =</span> yend)) <span class="sc">+</span></span>
<span id="cb76-13"><a href="homework-week-5.html#cb76-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_dag_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> status), <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb76-14"><a href="homework-week-5.html#cb76-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_dag_edges</span>() <span class="sc">+</span></span>
<span id="cb76-15"><a href="homework-week-5.html#cb76-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&#39;&#39;</span>) <span class="sc">+</span> </span>
<span id="cb76-16"><a href="homework-week-5.html#cb76-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_dag_text</span>(<span class="at">color =</span> <span class="st">&#39;black&#39;</span>) <span class="sc">+</span></span>
<span id="cb76-17"><a href="homework-week-5.html#cb76-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">list</span>(<span class="st">&#39;exposure&#39;</span> <span class="ot">=</span> <span class="st">&#39;#35608DFF&#39;</span>,</span>
<span id="cb76-18"><a href="homework-week-5.html#cb76-18" aria-hidden="true" tabindex="-1"></a>                                                                         <span class="st">&#39;outcome&#39;</span> <span class="ot">=</span> <span class="st">&#39;#22A884FF&#39;</span>,</span>
<span id="cb76-19"><a href="homework-week-5.html#cb76-19" aria-hidden="true" tabindex="-1"></a>                                                                         <span class="st">&#39;intermediate&#39;</span> <span class="ot">=</span> <span class="st">&#39;grey50&#39;</span>)) <span class="sc">+</span> </span>
<span id="cb76-20"><a href="homework-week-5.html#cb76-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_void</span>()</span>
<span id="cb76-21"><a href="homework-week-5.html#cb76-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="question-1-4" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Question 1</h2>
<blockquote>
<p>Consider the <code>data(Wines2012)</code> data table. These data are expert ratings of 20
different French and American wines by 9 different French and American judges.</p>
</blockquote>
<div id="data-2" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Data</h3>
<blockquote>
<p>Your goal is to model score, the subjective rating assigned by each judge to
each wine. I recommend standardizing it. In this first problem, consider only
variation among judges and wines. Construct index variables of judge and wine
and then use these index variables to construct a linear regression model.</p>
</blockquote>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="homework-week-5.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rethinking)</span>
<span id="cb77-2"><a href="homework-week-5.html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cmdstanr)</span></code></pre></div>
<pre><code>## This is cmdstanr version 0.4.0.9000</code></pre>
<pre><code>## - Online documentation and vignettes at mc-stan.org/cmdstanr</code></pre>
<pre><code>## - CmdStan path set to: /home/alecr/.cmdstan/cmdstan-2.27.0</code></pre>
<pre><code>## - Use set_cmdstan_path() to change the path</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="homework-week-5.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb82-2"><a href="homework-week-5.html#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="homework-week-5.html#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;Wines2012&quot;</span>)</span>
<span id="cb82-4"><a href="homework-week-5.html#cb82-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-5"><a href="homework-week-5.html#cb82-5" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">data.table</span>(Wines2012)</span>
<span id="cb82-6"><a href="homework-week-5.html#cb82-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-7"><a href="homework-week-5.html#cb82-7" aria-hidden="true" tabindex="-1"></a>DT[, scale_score <span class="sc">:</span><span class="er">=</span> <span class="fu">scale</span>(score)]</span>
<span id="cb82-8"><a href="homework-week-5.html#cb82-8" aria-hidden="true" tabindex="-1"></a>DT[, index_judge <span class="sc">:</span><span class="er">=</span> .GRP, judge]</span>
<span id="cb82-9"><a href="homework-week-5.html#cb82-9" aria-hidden="true" tabindex="-1"></a>DT[, index_wine <span class="sc">:</span><span class="er">=</span> .GRP, wine]</span></code></pre></div>
</div>
<div id="prior-predictive-simulation-1" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Prior predictive simulation</h3>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="homework-week-5.html#cb83-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb83-2"><a href="homework-week-5.html#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="homework-week-5.html#cb83-3" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb83-4"><a href="homework-week-5.html#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">index_judge_low =</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb83-5"><a href="homework-week-5.html#cb83-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">index_judge_high =</span> <span class="dv">2</span>,</span>
<span id="cb83-6"><a href="homework-week-5.html#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">index_wine_low =</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb83-7"><a href="homework-week-5.html#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">index_wine_high =</span> <span class="dv">2</span></span>
<span id="cb83-8"><a href="homework-week-5.html#cb83-8" aria-hidden="true" tabindex="-1"></a>)[<span class="fu">rep</span>(<span class="fu">seq.int</span>(.N), <span class="at">each =</span> n <span class="sc">/</span> .N)]</span>
<span id="cb83-9"><a href="homework-week-5.html#cb83-9" aria-hidden="true" tabindex="-1"></a>DT[, alpha <span class="sc">:</span><span class="er">=</span> <span class="fu">rnorm</span>(.N, <span class="dv">0</span>, <span class="fl">0.2</span>)]</span>
<span id="cb83-10"><a href="homework-week-5.html#cb83-10" aria-hidden="true" tabindex="-1"></a>DT[, beta_judge <span class="sc">:</span><span class="er">=</span> <span class="fu">rnorm</span>(.N, <span class="dv">0</span>, <span class="fl">0.5</span>)]</span>
<span id="cb83-11"><a href="homework-week-5.html#cb83-11" aria-hidden="true" tabindex="-1"></a>DT[, beta_wine <span class="sc">:</span><span class="er">=</span> <span class="fu">rnorm</span>(.N, <span class="dv">0</span>, <span class="fl">0.5</span>)]</span>
<span id="cb83-12"><a href="homework-week-5.html#cb83-12" aria-hidden="true" tabindex="-1"></a>DT[, sigma <span class="sc">:</span><span class="er">=</span> <span class="fu">rexp</span>(.N, <span class="dv">1</span>)]</span>
<span id="cb83-13"><a href="homework-week-5.html#cb83-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-14"><a href="homework-week-5.html#cb83-14" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">melt</span>(DT, <span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">&#39;index_judge_low&#39;</span>, <span class="st">&#39;index_judge_high&#39;</span>,</span>
<span id="cb83-15"><a href="homework-week-5.html#cb83-15" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&#39;index_wine_low&#39;</span>, <span class="st">&#39;index_wine_high&#39;</span>))</span>
<span id="cb83-16"><a href="homework-week-5.html#cb83-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-17"><a href="homework-week-5.html#cb83-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-18"><a href="homework-week-5.html#cb83-18" aria-hidden="true" tabindex="-1"></a>DT[, mu_for_judge_low <span class="sc">:</span><span class="er">=</span> alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> index_judge <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine]</span>
<span id="cb83-19"><a href="homework-week-5.html#cb83-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-20"><a href="homework-week-5.html#cb83-20" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> m<span class="sc">$</span><span class="fu">sample</span>(<span class="fu">list</span>(<span class="at">index_judge =</span> <span class="fu">as.integer</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>)), <span class="at">index_wine =</span> <span class="fu">as.integer</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>))))</span>
<span id="cb83-21"><a href="homework-week-5.html#cb83-21" aria-hidden="true" tabindex="-1"></a>posterior<span class="sc">::</span><span class="fu">as_draws_df</span>(mod<span class="sc">$</span><span class="fu">draws</span>()) <span class="ot">-&gt;</span> mdrw</span>
<span id="cb83-22"><a href="homework-week-5.html#cb83-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-23"><a href="homework-week-5.html#cb83-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-24"><a href="homework-week-5.html#cb83-24" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: this doesnt make sense - an index doesnt have this range</span></span>
<span id="cb83-25"><a href="homework-week-5.html#cb83-25" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb83-26"><a href="homework-week-5.html#cb83-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">index_judge_low =</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb83-27"><a href="homework-week-5.html#cb83-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">index_judge_high =</span> <span class="dv">2</span>,</span>
<span id="cb83-28"><a href="homework-week-5.html#cb83-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">index_wine_low =</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb83-29"><a href="homework-week-5.html#cb83-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">index_wine_high =</span> <span class="dv">2</span></span>
<span id="cb83-30"><a href="homework-week-5.html#cb83-30" aria-hidden="true" tabindex="-1"></a>)[<span class="fu">rep</span>(<span class="fu">seq.int</span>(.N), <span class="at">each =</span> n <span class="sc">/</span> .N)]</span>
<span id="cb83-31"><a href="homework-week-5.html#cb83-31" aria-hidden="true" tabindex="-1"></a><span class="co">#[, combination_id := .I][rep(seq.int(.N), each = n / .N)]</span></span>
<span id="cb83-32"><a href="homework-week-5.html#cb83-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-33"><a href="homework-week-5.html#cb83-33" aria-hidden="true" tabindex="-1"></a><span class="co"># index_judge &lt;- c(-2, 2)</span></span>
<span id="cb83-34"><a href="homework-week-5.html#cb83-34" aria-hidden="true" tabindex="-1"></a>DT[, alpha <span class="sc">:</span><span class="er">=</span> <span class="fu">rnorm</span>(.N, <span class="dv">0</span>, <span class="fl">0.2</span>)]</span>
<span id="cb83-35"><a href="homework-week-5.html#cb83-35" aria-hidden="true" tabindex="-1"></a>DT[, beta_judge <span class="sc">:</span><span class="er">=</span> <span class="fu">rnorm</span>(.N, <span class="dv">0</span>, <span class="fl">0.5</span>)]</span>
<span id="cb83-36"><a href="homework-week-5.html#cb83-36" aria-hidden="true" tabindex="-1"></a>DT[, beta_wine <span class="sc">:</span><span class="er">=</span> <span class="fu">rnorm</span>(.N, <span class="dv">0</span>, <span class="fl">0.5</span>)]</span>
<span id="cb83-37"><a href="homework-week-5.html#cb83-37" aria-hidden="true" tabindex="-1"></a>DT[, sigma <span class="sc">:</span><span class="er">=</span> <span class="fu">rexp</span>(.N, <span class="dv">1</span>)]</span>
<span id="cb83-38"><a href="homework-week-5.html#cb83-38" aria-hidden="true" tabindex="-1"></a>DT[, mu <span class="sc">:</span><span class="er">=</span> alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> index_judge <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine]</span>
<span id="cb83-39"><a href="homework-week-5.html#cb83-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-40"><a href="homework-week-5.html#cb83-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-41"><a href="homework-week-5.html#cb83-41" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> how to auto flex</span></span>
<span id="cb83-42"><a href="homework-week-5.html#cb83-42" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(DT) <span class="sc">+</span> </span>
<span id="cb83-43"><a href="homework-week-5.html#cb83-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(</span>
<span id="cb83-44"><a href="homework-week-5.html#cb83-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> index_judge_low,</span>
<span id="cb83-45"><a href="homework-week-5.html#cb83-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">xend =</span> index_judge_high,</span>
<span id="cb83-46"><a href="homework-week-5.html#cb83-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> index_judge_low <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine_low,</span>
<span id="cb83-47"><a href="homework-week-5.html#cb83-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">yend =</span> alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> index_judge_high <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine_low</span>
<span id="cb83-48"><a href="homework-week-5.html#cb83-48" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb83-49"><a href="homework-week-5.html#cb83-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-50"><a href="homework-week-5.html#cb83-50" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(DT) <span class="sc">+</span> </span>
<span id="cb83-51"><a href="homework-week-5.html#cb83-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(</span>
<span id="cb83-52"><a href="homework-week-5.html#cb83-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> index_wine_low,</span>
<span id="cb83-53"><a href="homework-week-5.html#cb83-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">xend =</span> index_wine_high,</span>
<span id="cb83-54"><a href="homework-week-5.html#cb83-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> index_judge_low <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine_low,</span>
<span id="cb83-55"><a href="homework-week-5.html#cb83-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">yend =</span> alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> index_judge_low <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine_high</span>
<span id="cb83-56"><a href="homework-week-5.html#cb83-56" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb83-57"><a href="homework-week-5.html#cb83-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-58"><a href="homework-week-5.html#cb83-58" aria-hidden="true" tabindex="-1"></a>mu_function <span class="ot">&lt;-</span> <span class="cf">function</span>(alpha, beta_judge, beta_wine, sigma) {</span>
<span id="cb83-59"><a href="homework-week-5.html#cb83-59" aria-hidden="true" tabindex="-1"></a>    alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> index_judge <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine</span>
<span id="cb83-60"><a href="homework-week-5.html#cb83-60" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb83-61"><a href="homework-week-5.html#cb83-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-62"><a href="homework-week-5.html#cb83-62" aria-hidden="true" tabindex="-1"></a>DT[, mu <span class="sc">:</span><span class="er">=</span> <span class="fu">quote</span>()]</span>
<span id="cb83-63"><a href="homework-week-5.html#cb83-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-64"><a href="homework-week-5.html#cb83-64" aria-hidden="true" tabindex="-1"></a>DT[, <span class="fu">rep</span>(<span class="fu">seq.int</span>(.N), <span class="at">each =</span> n <span class="sc">/</span> .N)]</span>
<span id="cb83-65"><a href="homework-week-5.html#cb83-65" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb83-66"><a href="homework-week-5.html#cb83-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-67"><a href="homework-week-5.html#cb83-67" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(DT) <span class="sc">+</span> </span>
<span id="cb83-68"><a href="homework-week-5.html#cb83-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(index_judge, mu)) <span class="sc">+</span></span>
<span id="cb83-69"><a href="homework-week-5.html#cb83-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>index_wine)</span>
<span id="cb83-70"><a href="homework-week-5.html#cb83-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-71"><a href="homework-week-5.html#cb83-71" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(DT) <span class="sc">+</span> </span>
<span id="cb83-72"><a href="homework-week-5.html#cb83-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(index_judge, mu)) <span class="sc">+</span></span>
<span id="cb83-73"><a href="homework-week-5.html#cb83-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>index_wine)</span>
<span id="cb83-74"><a href="homework-week-5.html#cb83-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-75"><a href="homework-week-5.html#cb83-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-76"><a href="homework-week-5.html#cb83-76" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb83-77"><a href="homework-week-5.html#cb83-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb83-78"><a href="homework-week-5.html#cb83-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x) <span class="sc">~</span>  alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> x <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine)</span>
<span id="cb83-79"><a href="homework-week-5.html#cb83-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-80"><a href="homework-week-5.html#cb83-80" aria-hidden="true" tabindex="-1"></a>beta_judge <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, <span class="fl">0.5</span>)</span>
<span id="cb83-81"><a href="homework-week-5.html#cb83-81" aria-hidden="true" tabindex="-1"></a>beta_wine <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, <span class="fl">0.5</span>)</span>
<span id="cb83-82"><a href="homework-week-5.html#cb83-82" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="fu">rexp</span>(n, <span class="dv">1</span>)</span>
<span id="cb83-83"><a href="homework-week-5.html#cb83-83" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> index_judge <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine</span>
<span id="cb83-84"><a href="homework-week-5.html#cb83-84" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">rep</span>(), <span class="at">y =</span> mu)</span>
<span id="cb83-85"><a href="homework-week-5.html#cb83-85" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>()</span>
<span id="cb83-86"><a href="homework-week-5.html#cb83-86" aria-hidden="true" tabindex="-1"></a>scale_score <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(mu, sigma)</span></code></pre></div>
</div>
<div id="model-2" class="section level3" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Model</h3>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="homework-week-5.html#cb84-1" aria-hidden="true" tabindex="-1"></a>data_m1 <span class="ot">&lt;-</span> <span class="fu">as.list</span>(DT[, .(scale_score, index_judge, index_wine)])</span>
<span id="cb84-2"><a href="homework-week-5.html#cb84-2" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">ulam</span>(</span>
<span id="cb84-3"><a href="homework-week-5.html#cb84-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">alist</span>(</span>
<span id="cb84-4"><a href="homework-week-5.html#cb84-4" aria-hidden="true" tabindex="-1"></a>        scale_score <span class="sc">~</span> <span class="fu">dnorm</span>(mu, sigma),</span>
<span id="cb84-5"><a href="homework-week-5.html#cb84-5" aria-hidden="true" tabindex="-1"></a>        mu <span class="ot">&lt;-</span> alpha <span class="sc">+</span> beta_judge <span class="sc">*</span> index_judge <span class="sc">+</span> beta_wine <span class="sc">*</span> index_wine,</span>
<span id="cb84-6"><a href="homework-week-5.html#cb84-6" aria-hidden="true" tabindex="-1"></a>        alpha <span class="sc">~</span> <span class="fu">dnorm</span>(<span class="dv">0</span>, <span class="fl">0.2</span>),</span>
<span id="cb84-7"><a href="homework-week-5.html#cb84-7" aria-hidden="true" tabindex="-1"></a>        beta_judge <span class="sc">~</span> <span class="fu">dnorm</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb84-8"><a href="homework-week-5.html#cb84-8" aria-hidden="true" tabindex="-1"></a>        beta_wine <span class="sc">~</span> <span class="fu">dnorm</span>(<span class="dv">0</span>, <span class="fl">0.5</span>),</span>
<span id="cb84-9"><a href="homework-week-5.html#cb84-9" aria-hidden="true" tabindex="-1"></a>        sigma <span class="sc">~</span> <span class="fu">dexp</span>(<span class="dv">1</span>)</span>
<span id="cb84-10"><a href="homework-week-5.html#cb84-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb84-11"><a href="homework-week-5.html#cb84-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data_m1,</span>
<span id="cb84-12"><a href="homework-week-5.html#cb84-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">chains =</span> <span class="dv">1</span></span>
<span id="cb84-13"><a href="homework-week-5.html#cb84-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb84-14"><a href="homework-week-5.html#cb84-14" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(m1<span class="sc">@</span>model)</span>
<span id="cb84-15"><a href="homework-week-5.html#cb84-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-16"><a href="homework-week-5.html#cb84-16" aria-hidden="true" tabindex="-1"></a>m1_stan <span class="ot">&lt;-</span> <span class="fu">c</span>(   <span class="st">&#39;</span></span>
<span id="cb84-17"><a href="homework-week-5.html#cb84-17" aria-hidden="true" tabindex="-1"></a><span class="st">data{</span></span>
<span id="cb84-18"><a href="homework-week-5.html#cb84-18" aria-hidden="true" tabindex="-1"></a><span class="st">    vector[180] scale_score;</span></span>
<span id="cb84-19"><a href="homework-week-5.html#cb84-19" aria-hidden="true" tabindex="-1"></a><span class="st">    int index_wine[180];</span></span>
<span id="cb84-20"><a href="homework-week-5.html#cb84-20" aria-hidden="true" tabindex="-1"></a><span class="st">    int index_judge[180];</span></span>
<span id="cb84-21"><a href="homework-week-5.html#cb84-21" aria-hidden="true" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb84-22"><a href="homework-week-5.html#cb84-22" aria-hidden="true" tabindex="-1"></a><span class="st">parameters{</span></span>
<span id="cb84-23"><a href="homework-week-5.html#cb84-23" aria-hidden="true" tabindex="-1"></a><span class="st">    real alpha;</span></span>
<span id="cb84-24"><a href="homework-week-5.html#cb84-24" aria-hidden="true" tabindex="-1"></a><span class="st">    real beta_judge;</span></span>
<span id="cb84-25"><a href="homework-week-5.html#cb84-25" aria-hidden="true" tabindex="-1"></a><span class="st">    real beta_wine;</span></span>
<span id="cb84-26"><a href="homework-week-5.html#cb84-26" aria-hidden="true" tabindex="-1"></a><span class="st">    real&lt;lower=0&gt; sigma;</span></span>
<span id="cb84-27"><a href="homework-week-5.html#cb84-27" aria-hidden="true" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb84-28"><a href="homework-week-5.html#cb84-28" aria-hidden="true" tabindex="-1"></a><span class="st">model{</span></span>
<span id="cb84-29"><a href="homework-week-5.html#cb84-29" aria-hidden="true" tabindex="-1"></a><span class="st">    vector[180] mu;</span></span>
<span id="cb84-30"><a href="homework-week-5.html#cb84-30" aria-hidden="true" tabindex="-1"></a><span class="st">    sigma ~ exponential( 1 );</span></span>
<span id="cb84-31"><a href="homework-week-5.html#cb84-31" aria-hidden="true" tabindex="-1"></a><span class="st">    beta_wine ~ normal( 0 , 0.5 );</span></span>
<span id="cb84-32"><a href="homework-week-5.html#cb84-32" aria-hidden="true" tabindex="-1"></a><span class="st">    beta_judge ~ normal( 0 , 0.5 );</span></span>
<span id="cb84-33"><a href="homework-week-5.html#cb84-33" aria-hidden="true" tabindex="-1"></a><span class="st">    alpha ~ normal( 0 , 0.2 );</span></span>
<span id="cb84-34"><a href="homework-week-5.html#cb84-34" aria-hidden="true" tabindex="-1"></a><span class="st">    for ( i in 1:180 ) {</span></span>
<span id="cb84-35"><a href="homework-week-5.html#cb84-35" aria-hidden="true" tabindex="-1"></a><span class="st">        mu[i] = alpha + beta_judge * index_judge[i] + beta_wine * index_wine[i];</span></span>
<span id="cb84-36"><a href="homework-week-5.html#cb84-36" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb84-37"><a href="homework-week-5.html#cb84-37" aria-hidden="true" tabindex="-1"></a><span class="st">    scale_score ~ normal( mu , sigma );</span></span>
<span id="cb84-38"><a href="homework-week-5.html#cb84-38" aria-hidden="true" tabindex="-1"></a><span class="st">}&#39;</span></span>
<span id="cb84-39"><a href="homework-week-5.html#cb84-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb84-40"><a href="homework-week-5.html#cb84-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-41"><a href="homework-week-5.html#cb84-41" aria-hidden="true" tabindex="-1"></a>m1_stan_file <span class="ot">&lt;-</span> <span class="fu">write_stan_file</span>(m1_stan)</span>
<span id="cb84-42"><a href="homework-week-5.html#cb84-42" aria-hidden="true" tabindex="-1"></a>m1_stan_model <span class="ot">&lt;-</span> <span class="fu">cmdstan_model</span>(m1_stan_file)</span>
<span id="cb84-43"><a href="homework-week-5.html#cb84-43" aria-hidden="true" tabindex="-1"></a>m1_stan_model_sample <span class="ot">&lt;-</span> m1_stan_model<span class="sc">$</span><span class="fu">sample</span>(data_m1, <span class="at">chains =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Justify your priors. You should end up with 9 judge parameters and 20 wine
parameters. Use ulam instead of quap to build this model, and be sure to check
the chains for convergence. If you’d rather build the model directly in Stan or
PyMC3, go ahead. I just want you to use Hamiltonian Monte Carlo instead of
quadratic approximation.</p>
<p>How do you interpret the variation among individual
judges and individual wines? Do you notice any patterns, just by plotting the
differences? Which judges gave the highest/lowest ratings? Which wines were
rated worst/ best on average?</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="homework-week-4.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lecture-01.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
