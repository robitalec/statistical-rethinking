<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Homework: Week 7 | Learning bayesian data analysis with Statistical Rethinking</title>
  <meta name="description" content="8 Homework: Week 7 | Learning bayesian data analysis with Statistical Rethinking" />
  <meta name="generator" content="bookdown 0.22.15 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Homework: Week 7 | Learning bayesian data analysis with Statistical Rethinking" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Homework: Week 7 | Learning bayesian data analysis with Statistical Rethinking" />
  
  
  

<meta name="author" content="Alec L. Robitaille" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="homework-week-6.html"/>
<link rel="next" href="homework-week-8.html"/>
<script src="libs/header-attrs-2.9.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#links"><i class="fa fa-check"></i><b>1.1</b> Links</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#adaptations"><i class="fa fa-check"></i><b>1.1.1</b> Adaptations</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#etc"><i class="fa fa-check"></i><b>1.1.2</b> Etc</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#seed"><i class="fa fa-check"></i><b>1.2</b> Seed</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="homework-week-1.html"><a href="homework-week-1.html"><i class="fa fa-check"></i><b>2</b> Homework: Week 1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="homework-week-1.html"><a href="homework-week-1.html#variables"><i class="fa fa-check"></i><b>2.1</b> Variables</a></li>
<li class="chapter" data-level="2.2" data-path="homework-week-1.html"><a href="homework-week-1.html#joint-model"><i class="fa fa-check"></i><b>2.2</b> Joint model</a></li>
<li class="chapter" data-level="2.3" data-path="homework-week-1.html"><a href="homework-week-1.html#question-1"><i class="fa fa-check"></i><b>2.3</b> Question 1</a></li>
<li class="chapter" data-level="2.4" data-path="homework-week-1.html"><a href="homework-week-1.html#question-2"><i class="fa fa-check"></i><b>2.4</b> Question 2</a></li>
<li class="chapter" data-level="2.5" data-path="homework-week-1.html"><a href="homework-week-1.html#question-3"><i class="fa fa-check"></i><b>2.5</b> Question 3</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="homework-week-2.html"><a href="homework-week-2.html"><i class="fa fa-check"></i><b>3</b> Homework: Week 2</a>
<ul>
<li class="chapter" data-level="3.1" data-path="homework-week-2.html"><a href="homework-week-2.html#question-1-1"><i class="fa fa-check"></i><b>3.1</b> Question 1</a></li>
<li class="chapter" data-level="3.2" data-path="homework-week-2.html"><a href="homework-week-2.html#question-2-1"><i class="fa fa-check"></i><b>3.2</b> Question 2</a></li>
<li class="chapter" data-level="3.3" data-path="homework-week-2.html"><a href="homework-week-2.html#homework-question-3"><i class="fa fa-check"></i><b>3.3</b> Homework: Question 3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="homework-week-3.html"><a href="homework-week-3.html"><i class="fa fa-check"></i><b>4</b> Homework: Week 3</a>
<ul>
<li class="chapter" data-level="4.1" data-path="homework-week-3.html"><a href="homework-week-3.html#overview-1"><i class="fa fa-check"></i><b>4.1</b> Overview</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="homework-week-3.html"><a href="homework-week-3.html#setup"><i class="fa fa-check"></i><b>4.1.1</b> Setup</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="homework-week-3.html"><a href="homework-week-3.html#question-1-2"><i class="fa fa-check"></i><b>4.2</b> Question 1</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="homework-week-3.html"><a href="homework-week-3.html#workings"><i class="fa fa-check"></i><b>4.2.1</b> Workings</a></li>
<li class="chapter" data-level="4.2.2" data-path="homework-week-3.html"><a href="homework-week-3.html#model"><i class="fa fa-check"></i><b>4.2.2</b> Model</a></li>
<li class="chapter" data-level="4.2.3" data-path="homework-week-3.html"><a href="homework-week-3.html#prior-predictive-simulation"><i class="fa fa-check"></i><b>4.2.3</b> Prior predictive simulation</a></li>
<li class="chapter" data-level="4.2.4" data-path="homework-week-3.html"><a href="homework-week-3.html#paths"><i class="fa fa-check"></i><b>4.2.4</b> Paths</a></li>
<li class="chapter" data-level="4.2.5" data-path="homework-week-3.html"><a href="homework-week-3.html#interpretation"><i class="fa fa-check"></i><b>4.2.5</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="homework-week-3.html"><a href="homework-week-3.html#question-2-2"><i class="fa fa-check"></i><b>4.3</b> Question 2</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="homework-week-3.html"><a href="homework-week-3.html#paths-1"><i class="fa fa-check"></i><b>4.3.1</b> Paths</a></li>
<li class="chapter" data-level="4.3.2" data-path="homework-week-3.html"><a href="homework-week-3.html#model-1"><i class="fa fa-check"></i><b>4.3.2</b> Model</a></li>
<li class="chapter" data-level="4.3.3" data-path="homework-week-3.html"><a href="homework-week-3.html#interpretation-1"><i class="fa fa-check"></i><b>4.3.3</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="homework-week-3.html"><a href="homework-week-3.html#question-3-1"><i class="fa fa-check"></i><b>4.4</b> Question 3</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="homework-week-3.html"><a href="homework-week-3.html#paths-2"><i class="fa fa-check"></i><b>4.4.1</b> Paths</a></li>
<li class="chapter" data-level="4.4.2" data-path="homework-week-3.html"><a href="homework-week-3.html#interpretation-2"><i class="fa fa-check"></i><b>4.4.2</b> Interpretation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="homework-week-4.html"><a href="homework-week-4.html"><i class="fa fa-check"></i><b>5</b> Homework: Week 4</a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="homework-week-4.html"><a href="homework-week-4.html#setup-1"><i class="fa fa-check"></i><b>5.0.1</b> Setup</a></li>
<li class="chapter" data-level="5.1" data-path="homework-week-4.html"><a href="homework-week-4.html#question-1-3"><i class="fa fa-check"></i><b>5.1</b> Question 1</a></li>
<li class="chapter" data-level="5.2" data-path="homework-week-4.html"><a href="homework-week-4.html#question-2-3"><i class="fa fa-check"></i><b>5.2</b> Question 2</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="homework-week-4.html"><a href="homework-week-4.html#dag"><i class="fa fa-check"></i><b>5.2.1</b> DAG</a></li>
<li class="chapter" data-level="5.2.2" data-path="homework-week-4.html"><a href="homework-week-4.html#data"><i class="fa fa-check"></i><b>5.2.2</b> Data</a></li>
<li class="chapter" data-level="5.2.3" data-path="homework-week-4.html"><a href="homework-week-4.html#models"><i class="fa fa-check"></i><b>5.2.3</b> Models</a></li>
<li class="chapter" data-level="5.2.4" data-path="homework-week-4.html"><a href="homework-week-4.html#interpretation-3"><i class="fa fa-check"></i><b>5.2.4</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="homework-week-4.html"><a href="homework-week-4.html#question-3-2"><i class="fa fa-check"></i><b>5.3</b> Question 3</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="homework-week-4.html"><a href="homework-week-4.html#data-1"><i class="fa fa-check"></i><b>5.3.1</b> Data</a></li>
<li class="chapter" data-level="5.3.2" data-path="homework-week-4.html"><a href="homework-week-4.html#models-1"><i class="fa fa-check"></i><b>5.3.2</b> Models</a></li>
<li class="chapter" data-level="5.3.3" data-path="homework-week-4.html"><a href="homework-week-4.html#dag-1"><i class="fa fa-check"></i><b>5.3.3</b> DAG</a></li>
<li class="chapter" data-level="5.3.4" data-path="homework-week-4.html"><a href="homework-week-4.html#interpretation-4"><i class="fa fa-check"></i><b>5.3.4</b> Interpretation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="homework-week-5.html"><a href="homework-week-5.html"><i class="fa fa-check"></i><b>6</b> Homework: Week 5</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="homework-week-5.html"><a href="homework-week-5.html#setup-2"><i class="fa fa-check"></i><b>6.0.1</b> Setup</a></li>
<li class="chapter" data-level="6.1" data-path="homework-week-5.html"><a href="homework-week-5.html#question-1-4"><i class="fa fa-check"></i><b>6.1</b> Question 1</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="homework-week-5.html"><a href="homework-week-5.html#data-2"><i class="fa fa-check"></i><b>6.1.1</b> Data</a></li>
<li class="chapter" data-level="6.1.2" data-path="homework-week-5.html"><a href="homework-week-5.html#prior-predictive-simulation-1"><i class="fa fa-check"></i><b>6.1.2</b> Prior predictive simulation</a></li>
<li class="chapter" data-level="6.1.3" data-path="homework-week-5.html"><a href="homework-week-5.html#model-2"><i class="fa fa-check"></i><b>6.1.3</b> Model</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="homework-week-5.html"><a href="homework-week-5.html#question-2-4"><i class="fa fa-check"></i><b>6.2</b> Question 2</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="homework-week-5.html"><a href="homework-week-5.html#data-3"><i class="fa fa-check"></i><b>6.2.1</b> Data</a></li>
<li class="chapter" data-level="6.2.2" data-path="homework-week-5.html"><a href="homework-week-5.html#priors"><i class="fa fa-check"></i><b>6.2.2</b> Priors</a></li>
<li class="chapter" data-level="6.2.3" data-path="homework-week-5.html"><a href="homework-week-5.html#model-3"><i class="fa fa-check"></i><b>6.2.3</b> Model</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="homework-week-5.html"><a href="homework-week-5.html#question-3-3"><i class="fa fa-check"></i><b>6.3</b> Question 3</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="homework-week-5.html"><a href="homework-week-5.html#data-4"><i class="fa fa-check"></i><b>6.3.1</b> Data</a></li>
<li class="chapter" data-level="6.3.2" data-path="homework-week-5.html"><a href="homework-week-5.html#model-4"><i class="fa fa-check"></i><b>6.3.2</b> Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="homework-week-6.html"><a href="homework-week-6.html"><i class="fa fa-check"></i><b>7</b> Homework: Week 6</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="homework-week-6.html"><a href="homework-week-6.html#setup-3"><i class="fa fa-check"></i><b>7.0.1</b> Setup</a></li>
<li class="chapter" data-level="7.1" data-path="homework-week-6.html"><a href="homework-week-6.html#question-1-5"><i class="fa fa-check"></i><b>7.1</b> Question 1</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="homework-week-6.html"><a href="homework-week-6.html#data-5"><i class="fa fa-check"></i><b>7.1.1</b> Data</a></li>
<li class="chapter" data-level="7.1.2" data-path="homework-week-6.html"><a href="homework-week-6.html#dag-2"><i class="fa fa-check"></i><b>7.1.2</b> DAG</a></li>
<li class="chapter" data-level="7.1.3" data-path="homework-week-6.html"><a href="homework-week-6.html#priors-1"><i class="fa fa-check"></i><b>7.1.3</b> Priors</a></li>
<li class="chapter" data-level="7.1.4" data-path="homework-week-6.html"><a href="homework-week-6.html#model-5"><i class="fa fa-check"></i><b>7.1.4</b> Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="homework-week-7.html"><a href="homework-week-7.html"><i class="fa fa-check"></i><b>8</b> Homework: Week 7</a>
<ul>
<li class="chapter" data-level="8.0.1" data-path="homework-week-7.html"><a href="homework-week-7.html#setup-4"><i class="fa fa-check"></i><b>8.0.1</b> Setup</a></li>
<li class="chapter" data-level="8.0.2" data-path="homework-week-7.html"><a href="homework-week-7.html#data-6"><i class="fa fa-check"></i><b>8.0.2</b> Data</a></li>
<li class="chapter" data-level="8.0.3" data-path="homework-week-7.html"><a href="homework-week-7.html#model-ordered-categorical-outcome"><i class="fa fa-check"></i><b>8.0.3</b> Model: ordered categorical outcome</a></li>
<li class="chapter" data-level="8.0.4" data-path="homework-week-7.html"><a href="homework-week-7.html#model-ordered-categorical-predictors"><i class="fa fa-check"></i><b>8.0.4</b> Model: ordered categorical predictors</a></li>
<li class="chapter" data-level="8.1" data-path="homework-week-7.html"><a href="homework-week-7.html#question-1-6"><i class="fa fa-check"></i><b>8.1</b> Question 1</a></li>
<li class="chapter" data-level="8.2" data-path="homework-week-7.html"><a href="homework-week-7.html#question-2-5"><i class="fa fa-check"></i><b>8.2</b> Question 2</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="homework-week-8.html"><a href="homework-week-8.html"><i class="fa fa-check"></i><b>9</b> Homework: Week 8</a>
<ul>
<li class="chapter" data-level="9.0.1" data-path="homework-week-8.html"><a href="homework-week-8.html#setup-5"><i class="fa fa-check"></i><b>9.0.1</b> Setup</a></li>
<li class="chapter" data-level="9.1" data-path="homework-week-8.html"><a href="homework-week-8.html#question-1-7"><i class="fa fa-check"></i><b>9.1</b> Question 1</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="homework-week-8.html"><a href="homework-week-8.html#data-7"><i class="fa fa-check"></i><b>9.1.1</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="homework-week-8.html"><a href="homework-week-8.html#question-2-6"><i class="fa fa-check"></i><b>9.2</b> Question 2</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="lecture-01.html"><a href="lecture-01.html"><i class="fa fa-check"></i><b>10</b> Lecture 01</a>
<ul>
<li class="chapter" data-level="10.0.1" data-path="lecture-01.html"><a href="lecture-01.html#popper"><i class="fa fa-check"></i><b>10.0.1</b> Popper</a></li>
<li class="chapter" data-level="10.0.2" data-path="lecture-01.html"><a href="lecture-01.html#approach"><i class="fa fa-check"></i><b>10.0.2</b> Approach</a></li>
<li class="chapter" data-level="10.1" data-path="lecture-01.html"><a href="lecture-01.html#hypotheses---process-models---statistical-models"><i class="fa fa-check"></i><b>10.1</b> Hypotheses - Process Models - Statistical Models</a></li>
<li class="chapter" data-level="10.2" data-path="lecture-01.html"><a href="lecture-01.html#small-world-large-world"><i class="fa fa-check"></i><b>10.2</b> Small world / large world</a></li>
<li class="chapter" data-level="10.3" data-path="lecture-01.html"><a href="lecture-01.html#example-four-marbles"><i class="fa fa-check"></i><b>10.3</b> Example: four marbles</a></li>
<li class="chapter" data-level="10.4" data-path="lecture-01.html"><a href="lecture-01.html#building-a-model"><i class="fa fa-check"></i><b>10.4</b> Building a model</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lecture-02.html"><a href="lecture-02.html"><i class="fa fa-check"></i><b>11</b> Lecture 02</a>
<ul>
<li class="chapter" data-level="11.1" data-path="lecture-02.html"><a href="lecture-02.html#joint-prior-distribution"><i class="fa fa-check"></i><b>11.1</b> Joint prior distribution</a></li>
<li class="chapter" data-level="11.2" data-path="lecture-02.html"><a href="lecture-02.html#example-inflatable-world"><i class="fa fa-check"></i><b>11.2</b> Example: inflatable world</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="lecture-02.html"><a href="lecture-02.html#design-the-model"><i class="fa fa-check"></i><b>11.2.1</b> <strong>Design the model</strong></a></li>
<li class="chapter" data-level="11.2.2" data-path="lecture-02.html"><a href="lecture-02.html#condition"><i class="fa fa-check"></i><b>11.2.2</b> <strong>Condition</strong></a></li>
<li class="chapter" data-level="11.2.3" data-path="lecture-02.html"><a href="lecture-02.html#evaluate"><i class="fa fa-check"></i><b>11.2.3</b> <strong>Evaluate</strong></a></li>
<li class="chapter" data-level="11.2.4" data-path="lecture-02.html"><a href="lecture-02.html#define-parameters"><i class="fa fa-check"></i><b>11.2.4</b> Define parameters</a></li>
<li class="chapter" data-level="11.2.5" data-path="lecture-02.html"><a href="lecture-02.html#joint-model-1"><i class="fa fa-check"></i><b>11.2.5</b> Joint model</a></li>
<li class="chapter" data-level="11.2.6" data-path="lecture-02.html"><a href="lecture-02.html#posterior"><i class="fa fa-check"></i><b>11.2.6</b> Posterior</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="lecture-02.html"><a href="lecture-02.html#grid-approximation"><i class="fa fa-check"></i><b>11.3</b> Grid approximation</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="lecture-02.html"><a href="lecture-02.html#sampling-from-the-posterior"><i class="fa fa-check"></i><b>11.3.1</b> Sampling from the posterior</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="lecture-03.html"><a href="lecture-03.html"><i class="fa fa-check"></i><b>12</b> Lecture 03</a>
<ul>
<li class="chapter" data-level="12.1" data-path="lecture-03.html"><a href="lecture-03.html#regressions"><i class="fa fa-check"></i><b>12.1</b> Regressions</a></li>
<li class="chapter" data-level="12.2" data-path="lecture-03.html"><a href="lecture-03.html#normal-distributions"><i class="fa fa-check"></i><b>12.2</b> Normal distributions</a></li>
<li class="chapter" data-level="12.3" data-path="lecture-03.html"><a href="lecture-03.html#prior-predictive-distributions"><i class="fa fa-check"></i><b>12.3</b> Prior predictive distributions</a></li>
<li class="chapter" data-level="12.4" data-path="lecture-03.html"><a href="lecture-03.html#quadratic-approximate"><i class="fa fa-check"></i><b>12.4</b> Quadratic approximate</a></li>
<li class="chapter" data-level="12.5" data-path="lecture-03.html"><a href="lecture-03.html#centering-variables"><i class="fa fa-check"></i><b>12.5</b> Centering variables</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="lecture-04.html"><a href="lecture-04.html"><i class="fa fa-check"></i><b>13</b> Lecture 04</a>
<ul>
<li class="chapter" data-level="13.1" data-path="lecture-04.html"><a href="lecture-04.html#standardizing-variables"><i class="fa fa-check"></i><b>13.1</b> Standardizing variables</a></li>
<li class="chapter" data-level="13.2" data-path="lecture-04.html"><a href="lecture-04.html#plotting-uncertainty---sample-from-posterior"><i class="fa fa-check"></i><b>13.2</b> Plotting uncertainty - sample from posterior</a></li>
<li class="chapter" data-level="13.3" data-path="lecture-04.html"><a href="lecture-04.html#polynomials"><i class="fa fa-check"></i><b>13.3</b> Polynomials</a></li>
<li class="chapter" data-level="13.4" data-path="lecture-04.html"><a href="lecture-04.html#splines"><i class="fa fa-check"></i><b>13.4</b> Splines</a></li>
<li class="chapter" data-level="13.5" data-path="lecture-04.html"><a href="lecture-04.html#basis-splines"><i class="fa fa-check"></i><b>13.5</b> Basis splines</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="lecture-04.html"><a href="lecture-04.html#recipe"><i class="fa fa-check"></i><b>13.5.1</b> Recipe</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="lecture-05.html"><a href="lecture-05.html"><i class="fa fa-check"></i><b>14</b> Lecture 05</a>
<ul>
<li class="chapter" data-level="14.1" data-path="lecture-05.html"><a href="lecture-05.html#multiple-regression-models"><i class="fa fa-check"></i><b>14.1</b> Multiple regression models</a></li>
<li class="chapter" data-level="14.2" data-path="lecture-05.html"><a href="lecture-05.html#directed-acyclic-graphs-dag"><i class="fa fa-check"></i><b>14.2</b> Directed acyclic graphs (DAG)</a></li>
<li class="chapter" data-level="14.3" data-path="lecture-05.html"><a href="lecture-05.html#example-age-marriage-divorce"><i class="fa fa-check"></i><b>14.3</b> Example: Age, marriage, divorce</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="lecture-05.html"><a href="lecture-05.html#priors-2"><i class="fa fa-check"></i><b>14.3.1</b> Priors</a></li>
<li class="chapter" data-level="14.3.2" data-path="lecture-05.html"><a href="lecture-05.html#prior-predictive-simulation-2"><i class="fa fa-check"></i><b>14.3.2</b> Prior predictive simulation</a></li>
<li class="chapter" data-level="14.3.3" data-path="lecture-05.html"><a href="lecture-05.html#interpretation-5"><i class="fa fa-check"></i><b>14.3.3</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="lecture-05.html"><a href="lecture-05.html#plotting-multivariate-posteriors"><i class="fa fa-check"></i><b>14.4</b> Plotting multivariate posteriors</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="lecture-05.html"><a href="lecture-05.html#posterior-predictive-checks"><i class="fa fa-check"></i><b>14.4.1</b> Posterior predictive checks</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="lecture-05.html"><a href="lecture-05.html#reveal-masked-associations"><i class="fa fa-check"></i><b>14.5</b> Reveal masked associations</a></li>
<li class="chapter" data-level="14.6" data-path="lecture-05.html"><a href="lecture-05.html#categorical-variables"><i class="fa fa-check"></i><b>14.6</b> Categorical variables</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="lecture-05.html"><a href="lecture-05.html#dummy-variable"><i class="fa fa-check"></i><b>14.6.1</b> Dummy variable</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="lecture-06.html"><a href="lecture-06.html"><i class="fa fa-check"></i><b>15</b> Lecture 06</a>
<ul>
<li class="chapter" data-level="15.1" data-path="lecture-06.html"><a href="lecture-06.html#index-variable"><i class="fa fa-check"></i><b>15.1</b> Index variable</a></li>
<li class="chapter" data-level="15.2" data-path="lecture-06.html"><a href="lecture-06.html#four-elemental-confounds"><i class="fa fa-check"></i><b>15.2</b> Four elemental confounds</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="lecture-06.html"><a href="lecture-06.html#notes"><i class="fa fa-check"></i><b>15.2.1</b> Notes</a></li>
<li class="chapter" data-level="15.2.2" data-path="lecture-06.html"><a href="lecture-06.html#the-fork"><i class="fa fa-check"></i><b>15.2.2</b> The fork</a></li>
<li class="chapter" data-level="15.2.3" data-path="lecture-06.html"><a href="lecture-06.html#the-path"><i class="fa fa-check"></i><b>15.2.3</b> The path</a></li>
<li class="chapter" data-level="15.2.4" data-path="lecture-06.html"><a href="lecture-06.html#the-collider"><i class="fa fa-check"></i><b>15.2.4</b> The collider</a></li>
<li class="chapter" data-level="15.2.5" data-path="lecture-06.html"><a href="lecture-06.html#steps"><i class="fa fa-check"></i><b>15.2.5</b> Steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="lecture-07.html"><a href="lecture-07.html"><i class="fa fa-check"></i><b>16</b> Lecture 07</a>
<ul>
<li class="chapter" data-level="16.1" data-path="lecture-07.html"><a href="lecture-07.html#four-elemental-confounds-continued"><i class="fa fa-check"></i><b>16.1</b> Four elemental confounds (continued)</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="lecture-07.html"><a href="lecture-07.html#unobserved-variables"><i class="fa fa-check"></i><b>16.1.1</b> Unobserved variables</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="lecture-07.html"><a href="lecture-07.html#over-fitting"><i class="fa fa-check"></i><b>16.2</b> Over fitting</a></li>
<li class="chapter" data-level="16.3" data-path="lecture-07.html"><a href="lecture-07.html#measuring-model-fit"><i class="fa fa-check"></i><b>16.3</b> Measuring model fit</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="lecture-07.html"><a href="lecture-07.html#r-squared"><i class="fa fa-check"></i><b>16.3.1</b> R squared</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="lecture-07.html"><a href="lecture-07.html#obtaining-the-regular-features"><i class="fa fa-check"></i><b>16.4</b> Obtaining the regular features</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="lecture-08.html"><a href="lecture-08.html"><i class="fa fa-check"></i><b>17</b> Lecture 08</a>
<ul>
<li class="chapter" data-level="17.1" data-path="lecture-08.html"><a href="lecture-08.html#information-theory"><i class="fa fa-check"></i><b>17.1</b> Information theory</a></li>
<li class="chapter" data-level="17.2" data-path="lecture-08.html"><a href="lecture-08.html#divergence"><i class="fa fa-check"></i><b>17.2</b> Divergence</a></li>
<li class="chapter" data-level="17.3" data-path="lecture-08.html"><a href="lecture-08.html#estimating-divergence"><i class="fa fa-check"></i><b>17.3</b> Estimating divergence</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="lecture-08.html"><a href="lecture-08.html#log-pointwise-predictive-density"><i class="fa fa-check"></i><b>17.3.1</b> Log pointwise predictive density</a></li>
<li class="chapter" data-level="17.3.2" data-path="lecture-08.html"><a href="lecture-08.html#deviance"><i class="fa fa-check"></i><b>17.3.2</b> Deviance</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="lecture-08.html"><a href="lecture-08.html#regularization"><i class="fa fa-check"></i><b>17.4</b> Regularization</a></li>
<li class="chapter" data-level="17.5" data-path="lecture-08.html"><a href="lecture-08.html#cross-validation"><i class="fa fa-check"></i><b>17.5</b> Cross validation</a>
<ul>
<li class="chapter" data-level="17.5.1" data-path="lecture-08.html"><a href="lecture-08.html#loo"><i class="fa fa-check"></i><b>17.5.1</b> LOO</a></li>
</ul></li>
<li class="chapter" data-level="17.6" data-path="lecture-08.html"><a href="lecture-08.html#information-criteria"><i class="fa fa-check"></i><b>17.6</b> Information criteria</a>
<ul>
<li class="chapter" data-level="17.6.1" data-path="lecture-08.html"><a href="lecture-08.html#waic"><i class="fa fa-check"></i><b>17.6.1</b> WAIC</a></li>
<li class="chapter" data-level="17.6.2" data-path="lecture-08.html"><a href="lecture-08.html#standard-error"><i class="fa fa-check"></i><b>17.6.2</b> Standard error</a></li>
</ul></li>
<li class="chapter" data-level="17.7" data-path="lecture-08.html"><a href="lecture-08.html#model-selection"><i class="fa fa-check"></i><b>17.7</b> Model selection</a></li>
<li class="chapter" data-level="17.8" data-path="lecture-08.html"><a href="lecture-08.html#model-comparison"><i class="fa fa-check"></i><b>17.8</b> Model comparison</a>
<ul>
<li class="chapter" data-level="17.8.1" data-path="lecture-08.html"><a href="lecture-08.html#example-1-model-mis-selection-using-waic"><i class="fa fa-check"></i><b>17.8.1</b> Example 1: model mis-selection using WAIC</a></li>
<li class="chapter" data-level="17.8.2" data-path="lecture-08.html"><a href="lecture-08.html#example-2-primate-lifetime"><i class="fa fa-check"></i><b>17.8.2</b> Example 2: primate lifetime</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="lecture-09.html"><a href="lecture-09.html"><i class="fa fa-check"></i><b>18</b> Lecture 09</a>
<ul>
<li class="chapter" data-level="18.1" data-path="lecture-09.html"><a href="lecture-09.html#conditioning"><i class="fa fa-check"></i><b>18.1</b> Conditioning</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="lecture-09.html"><a href="lecture-09.html#example-ruggedness"><i class="fa fa-check"></i><b>18.1.1</b> Example: ruggedness</a></li>
<li class="chapter" data-level="18.1.2" data-path="lecture-09.html"><a href="lecture-09.html#example-tulips"><i class="fa fa-check"></i><b>18.1.2</b> Example: tulips</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="lecture-09.html"><a href="lecture-09.html#interpreting-interactions"><i class="fa fa-check"></i><b>18.2</b> Interpreting interactions</a></li>
<li class="chapter" data-level="18.3" data-path="lecture-09.html"><a href="lecture-09.html#plotting-interactions"><i class="fa fa-check"></i><b>18.3</b> Plotting interactions</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="lecture-09.html"><a href="lecture-09.html#higher-order-interactions"><i class="fa fa-check"></i><b>18.3.1</b> Higher order interactions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="lecture-10.html"><a href="lecture-10.html"><i class="fa fa-check"></i><b>19</b> Lecture 10</a>
<ul>
<li class="chapter" data-level="19.1" data-path="lecture-10.html"><a href="lecture-10.html#markov-chain-monte-carlo"><i class="fa fa-check"></i><b>19.1</b> Markov Chain Monte Carlo</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="lecture-10.html"><a href="lecture-10.html#metropolis-algorithm"><i class="fa fa-check"></i><b>19.1.1</b> Metropolis algorithm</a></li>
<li class="chapter" data-level="19.1.2" data-path="lecture-10.html"><a href="lecture-10.html#metropolis-hastings"><i class="fa fa-check"></i><b>19.1.2</b> Metropolis Hastings</a></li>
<li class="chapter" data-level="19.1.3" data-path="lecture-10.html"><a href="lecture-10.html#gibbs-sampling"><i class="fa fa-check"></i><b>19.1.3</b> Gibbs sampling</a></li>
<li class="chapter" data-level="19.1.4" data-path="lecture-10.html"><a href="lecture-10.html#hamiltonian-monte-carlo"><i class="fa fa-check"></i><b>19.1.4</b> Hamiltonian Monte Carlo</a></li>
<li class="chapter" data-level="19.1.5" data-path="lecture-10.html"><a href="lecture-10.html#tuning-mcmc"><i class="fa fa-check"></i><b>19.1.5</b> Tuning MCMC</a></li>
<li class="chapter" data-level="19.1.6" data-path="lecture-10.html"><a href="lecture-10.html#stan"><i class="fa fa-check"></i><b>19.1.6</b> Stan</a></li>
<li class="chapter" data-level="19.1.7" data-path="lecture-10.html"><a href="lecture-10.html#ulam"><i class="fa fa-check"></i><b>19.1.7</b> ulam</a></li>
<li class="chapter" data-level="19.1.8" data-path="lecture-10.html"><a href="lecture-10.html#diagnosis"><i class="fa fa-check"></i><b>19.1.8</b> Diagnosis</a></li>
<li class="chapter" data-level="19.1.9" data-path="lecture-10.html"><a href="lecture-10.html#checking-the-chain"><i class="fa fa-check"></i><b>19.1.9</b> Checking the chain</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="lecture-11.html"><a href="lecture-11.html"><i class="fa fa-check"></i><b>20</b> Lecture 11</a>
<ul>
<li class="chapter" data-level="20.1" data-path="lecture-11.html"><a href="lecture-11.html#maximum-entropy"><i class="fa fa-check"></i><b>20.1</b> Maximum entropy</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="lecture-11.html"><a href="lecture-11.html#distributions"><i class="fa fa-check"></i><b>20.1.1</b> Distributions</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="lecture-11.html"><a href="lecture-11.html#generalized-linear-model"><i class="fa fa-check"></i><b>20.2</b> Generalized linear model</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="lecture-11.html"><a href="lecture-11.html#picking-a-distribution"><i class="fa fa-check"></i><b>20.2.1</b> Picking a distribution</a></li>
<li class="chapter" data-level="20.2.2" data-path="lecture-11.html"><a href="lecture-11.html#types-of-outcomes"><i class="fa fa-check"></i><b>20.2.2</b> Types of outcomes</a></li>
<li class="chapter" data-level="20.2.3" data-path="lecture-11.html"><a href="lecture-11.html#model-parameters-with-a-link-function"><i class="fa fa-check"></i><b>20.2.3</b> Model parameters with a link function</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="lecture-11.html"><a href="lecture-11.html#binomial-distribution"><i class="fa fa-check"></i><b>20.3</b> Binomial distribution</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="lecture-11.html"><a href="lecture-11.html#link"><i class="fa fa-check"></i><b>20.3.1</b> Link</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="lecture-12.html"><a href="lecture-12.html"><i class="fa fa-check"></i><b>21</b> Lecture 12</a>
<ul>
<li class="chapter" data-level="21.1" data-path="lecture-12.html"><a href="lecture-12.html#relative-and-absolute-effects"><i class="fa fa-check"></i><b>21.1</b> Relative and absolute effects</a></li>
<li class="chapter" data-level="21.2" data-path="lecture-12.html"><a href="lecture-12.html#logistic-regression"><i class="fa fa-check"></i><b>21.2</b> Logistic regression</a></li>
<li class="chapter" data-level="21.3" data-path="lecture-12.html"><a href="lecture-12.html#simpsons-paradox"><i class="fa fa-check"></i><b>21.3</b> Simpsons paradox</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="lecture-13.html"><a href="lecture-13.html"><i class="fa fa-check"></i><b>22</b> Lecture 13</a>
<ul>
<li class="chapter" data-level="22.1" data-path="lecture-13.html"><a href="lecture-13.html#binomial"><i class="fa fa-check"></i><b>22.1</b> Binomial</a></li>
<li class="chapter" data-level="22.2" data-path="lecture-13.html"><a href="lecture-13.html#poisson"><i class="fa fa-check"></i><b>22.2</b> Poisson</a></li>
<li class="chapter" data-level="22.3" data-path="lecture-13.html"><a href="lecture-13.html#generalized-linear-madness"><i class="fa fa-check"></i><b>22.3</b> Generalized linear madness</a></li>
<li class="chapter" data-level="22.4" data-path="lecture-13.html"><a href="lecture-13.html#scientific-model"><i class="fa fa-check"></i><b>22.4</b> Scientific model</a></li>
<li class="chapter" data-level="22.5" data-path="lecture-13.html"><a href="lecture-13.html#survival-analysis"><i class="fa fa-check"></i><b>22.5</b> Survival analysis</a></li>
<li class="chapter" data-level="22.6" data-path="lecture-13.html"><a href="lecture-13.html#monsters"><i class="fa fa-check"></i><b>22.6</b> Monsters</a></li>
<li class="chapter" data-level="22.7" data-path="lecture-13.html"><a href="lecture-13.html#mixtures"><i class="fa fa-check"></i><b>22.7</b> Mixtures</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="lecture-14.html"><a href="lecture-14.html"><i class="fa fa-check"></i><b>23</b> Lecture 14</a>
<ul>
<li class="chapter" data-level="23.1" data-path="lecture-14.html"><a href="lecture-14.html#ordered-categories"><i class="fa fa-check"></i><b>23.1</b> Ordered categories</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="lecture-15.html"><a href="lecture-15.html"><i class="fa fa-check"></i><b>24</b> Lecture 15</a>
<ul>
<li class="chapter" data-level="24.1" data-path="lecture-15.html"><a href="lecture-15.html#multilevel-models"><i class="fa fa-check"></i><b>24.1</b> Multilevel models</a></li>
<li class="chapter" data-level="24.2" data-path="lecture-15.html"><a href="lecture-15.html#varying-intercepts"><i class="fa fa-check"></i><b>24.2</b> Varying intercepts</a></li>
<li class="chapter" data-level="24.3" data-path="lecture-15.html"><a href="lecture-15.html#shrinkage"><i class="fa fa-check"></i><b>24.3</b> Shrinkage</a></li>
<li class="chapter" data-level="24.4" data-path="lecture-15.html"><a href="lecture-15.html#pooling"><i class="fa fa-check"></i><b>24.4</b> Pooling</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learning bayesian data analysis with Statistical Rethinking</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="homework-week-7" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Homework: Week 7</h1>
<p>2021-09-07 [updated: 2021-09-08]</p>
<div id="setup-4" class="section level3" number="8.0.1">
<h3><span class="header-section-number">8.0.1</span> Setup</h3>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="homework-week-7.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Packages</span></span>
<span id="cb201-2"><a href="homework-week-7.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdag)</span>
<span id="cb201-3"><a href="homework-week-7.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dagitty)</span>
<span id="cb201-4"><a href="homework-week-7.html#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb201-5"><a href="homework-week-7.html#cb201-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb201-6"><a href="homework-week-7.html#cb201-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rethinking)</span>
<span id="cb201-7"><a href="homework-week-7.html#cb201-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cmdstanr)</span>
<span id="cb201-8"><a href="homework-week-7.html#cb201-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(posterior)</span>
<span id="cb201-9"><a href="homework-week-7.html#cb201-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bayesplot)</span>
<span id="cb201-10"><a href="homework-week-7.html#cb201-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(boot)</span>
<span id="cb201-11"><a href="homework-week-7.html#cb201-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-12"><a href="homework-week-7.html#cb201-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Functions</span></span>
<span id="cb201-13"><a href="homework-week-7.html#cb201-13" aria-hidden="true" tabindex="-1"></a>dag_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(dag) {</span>
<span id="cb201-14"><a href="homework-week-7.html#cb201-14" aria-hidden="true" tabindex="-1"></a>    stat <span class="ot">&lt;-</span> <span class="fu">node_status</span>(dag, <span class="cn">FALSE</span>)</span>
<span id="cb201-15"><a href="homework-week-7.html#cb201-15" aria-hidden="true" tabindex="-1"></a>    stat<span class="sc">$</span>data<span class="sc">$</span>status[<span class="fu">is.na</span>(stat<span class="sc">$</span>data<span class="sc">$</span>status)] <span class="ot">&lt;-</span> <span class="st">&#39;intermediate&#39;</span></span>
<span id="cb201-16"><a href="homework-week-7.html#cb201-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(stat, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">xend =</span> xend, <span class="at">yend =</span> yend)) <span class="sc">+</span></span>
<span id="cb201-17"><a href="homework-week-7.html#cb201-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_dag_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> status), <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb201-18"><a href="homework-week-7.html#cb201-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_dag_edges</span>() <span class="sc">+</span></span>
<span id="cb201-19"><a href="homework-week-7.html#cb201-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&#39;&#39;</span>) <span class="sc">+</span> </span>
<span id="cb201-20"><a href="homework-week-7.html#cb201-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_dag_text</span>(<span class="at">color =</span> <span class="st">&#39;black&#39;</span>) <span class="sc">+</span></span>
<span id="cb201-21"><a href="homework-week-7.html#cb201-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">list</span>(<span class="st">&#39;exposure&#39;</span> <span class="ot">=</span> <span class="st">&#39;#35608DFF&#39;</span>,</span>
<span id="cb201-22"><a href="homework-week-7.html#cb201-22" aria-hidden="true" tabindex="-1"></a>                                                                         <span class="st">&#39;outcome&#39;</span> <span class="ot">=</span> <span class="st">&#39;#22A884FF&#39;</span>,</span>
<span id="cb201-23"><a href="homework-week-7.html#cb201-23" aria-hidden="true" tabindex="-1"></a>                                                                         <span class="st">&#39;intermediate&#39;</span> <span class="ot">=</span> <span class="st">&#39;grey50&#39;</span>)) <span class="sc">+</span> </span>
<span id="cb201-24"><a href="homework-week-7.html#cb201-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_void</span>()</span>
<span id="cb201-25"><a href="homework-week-7.html#cb201-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb201-26"><a href="homework-week-7.html#cb201-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-27"><a href="homework-week-7.html#cb201-27" aria-hidden="true" tabindex="-1"></a>cmd_draws <span class="ot">&lt;-</span> <span class="cf">function</span>(model) {</span>
<span id="cb201-28"><a href="homework-week-7.html#cb201-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_draws_df</span>(model<span class="sc">$</span><span class="fu">draws</span>())</span>
<span id="cb201-29"><a href="homework-week-7.html#cb201-29" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="data-6" class="section level3" number="8.0.2">
<h3><span class="header-section-number">8.0.2</span> Data</h3>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="homework-week-7.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(Trolley)</span>
<span id="cb202-2"><a href="homework-week-7.html#cb202-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">data.table</span>(Trolley)</span>
<span id="cb202-3"><a href="homework-week-7.html#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="fu">precis</span>(DT)</span></code></pre></div>
<pre><code>##            mean    sd 5.5% 94.5%     histogram
## case        NaN    NA   NA    NA              
## response   4.20  1.91    1     7  ▃▂▁▃▁▇▁▅▁▅▁▅
## order     16.50  9.29    2    31       ▇▅▇▇▅▇▂
## id          NaN    NA   NA    NA              
## age       37.49 14.23   18    61 ▂▇▅▇▅▇▅▅▃▅▂▁▁
## male       0.57  0.49    0     1    ▅▁▁▁▁▁▁▁▁▇
## edu         NaN    NA   NA    NA              
## action     0.43  0.50    0     1    ▇▁▁▁▁▁▁▁▁▅
## intention  0.47  0.50    0     1    ▇▁▁▁▁▁▁▁▁▇
## contact    0.20  0.40    0     1    ▇▁▁▁▁▁▁▁▁▂
## story       NaN    NA   NA    NA              
## action2    0.63  0.48    0     1    ▃▁▁▁▁▁▁▁▁▇</code></pre>
<p>Response: 1-7 integer, “how morally permissible the action to be taken (or not) is”. Categorical, ordered, but distances between categories is not metric or known.</p>
<p>Logit = log-odds, cumulative logit = log-cumulative-odds. Both constrained between 0-1.</p>
<p>Log-cumulative-odds for response 7 will be infinity since log(1/(1-1)) = infinity.
Given this, we only need K-1 = 6 intercepts.</p>
</div>
<div id="model-ordered-categorical-outcome" class="section level3" number="8.0.3">
<h3><span class="header-section-number">8.0.3</span> Model: ordered categorical outcome</h3>
<p>Probability of data: <span class="math inline">\(R_{i} \sim \text{Ordered-logit}(\phi_{i}, K)\)</span></p>
<p>Linear model: <span class="math inline">\(\phi_{i} = 0\)</span></p>
<p>Prior for each intercept: <span class="math inline">\(K_{k} \sim \text{Normal}(0, 1.5)\)</span></p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="homework-week-7.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">register_knitr_engine</span>(<span class="at">override =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre class="stan"><code>data {
  int N;
  int K;
  int response[N];
  int action[N];
  int intention[N];
  int contact[N];
}
parameters {
    // Cut points are the positions of responses along cumulative odds
  ordered[K] cutpoints;
  real beta_action;
  real beta_intention;
  real beta_contact;
}
model {
  vector[N] phi;

    for (i in 1:N) {
        phi[i] = beta_action * action[i] + beta_contact * contact[i] + beta_intention * intention[i];
        response[i] ~ ordered_logistic(phi[i], cutpoints);
    }

  cutpoints ~ normal(0, 1.5);
  beta_action ~ normal(0, 0.5);
  beta_contact ~ normal(0, 0.5);
  beta_intention ~ normal(0, 0.5);
}</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="homework-week-7.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model1_stan &lt;- &#39;model1.stan&#39;</span></span>
<span id="cb206-2"><a href="homework-week-7.html#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="co"># writeLines(readLines(model1_stan))</span></span>
<span id="cb206-3"><a href="homework-week-7.html#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="co"># model1 &lt;- cmdstan_model(model1_stan, cpp_options = list(stan_threads = TRUE))</span></span>
<span id="cb206-4"><a href="homework-week-7.html#cb206-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-5"><a href="homework-week-7.html#cb206-5" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb206-6"><a href="homework-week-7.html#cb206-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.list</span>(DT[, .(response, action, intention, contact)]), </span>
<span id="cb206-7"><a href="homework-week-7.html#cb206-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> DT[, .N],</span>
<span id="cb206-8"><a href="homework-week-7.html#cb206-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">K =</span> DT[, <span class="fu">uniqueN</span>(response) <span class="sc">-</span> <span class="dv">1</span>]</span>
<span id="cb206-9"><a href="homework-week-7.html#cb206-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb206-10"><a href="homework-week-7.html#cb206-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-11"><a href="homework-week-7.html#cb206-11" aria-hidden="true" tabindex="-1"></a>model1_sample <span class="ot">&lt;-</span></span>
<span id="cb206-12"><a href="homework-week-7.html#cb206-12" aria-hidden="true" tabindex="-1"></a>    model1<span class="sc">$</span><span class="fu">sample</span>(</span>
<span id="cb206-13"><a href="homework-week-7.html#cb206-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> model_data,</span>
<span id="cb206-14"><a href="homework-week-7.html#cb206-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">chains =</span> <span class="dv">4</span>,</span>
<span id="cb206-15"><a href="homework-week-7.html#cb206-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">parallel_chains =</span> <span class="dv">4</span>,</span>
<span id="cb206-16"><a href="homework-week-7.html#cb206-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">threads_per_chain =</span> <span class="dv">4</span></span>
<span id="cb206-17"><a href="homework-week-7.html#cb206-17" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code>## Warning: &#39;threads_per_chain&#39; is set but the model was not compiled with &#39;cpp_options =
## list(stan_threads = TRUE)&#39; so &#39;threads_per_chain&#39; will have no effect!</code></pre>
<pre><code>## Running MCMC with 4 parallel chains...
## 
## Chain 1 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3975.82, but should be greater than the previous element, -3975.82 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3975.66, but should be greater than the previous element, -3975.66 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -993.493, but should be greater than the previous element, -993.493 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -247.693, but should be greater than the previous element, -247.693 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -60.8856, but should be greater than the previous element, -60.8856 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -14.2358, but should be greater than the previous element, -14.2358 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -710081, but should be greater than the previous element, -710081 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -20280.7, but should be greater than the previous element, -20280.7 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -196.323, but should be greater than the previous element, -196.323 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 2 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -983.903, but should be greater than the previous element, -983.903 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -984.776, but should be greater than the previous element, -984.776 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -245.894, but should be greater than the previous element, -245.894 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -62.1734, but should be greater than the previous element, -62.1734 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -10665.2, but should be greater than the previous element, -10665.2 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -300.803, but should be greater than the previous element, -300.803 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 3 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3746.74, but should be greater than the previous element, -3746.74 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3745.82, but should be greater than the previous element, -3745.82 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -937.247, but should be greater than the previous element, -937.247 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -235.113, but should be greater than the previous element, -235.113 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -59.4489, but should be greater than the previous element, -59.4489 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -15.5856, but should be greater than the previous element, -15.5856 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -566145, but should be greater than the previous element, -566145 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -16176, but should be greater than the previous element, -16176 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -158.195, but should be greater than the previous element, -158.195 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 4 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2267.09, but should be greater than the previous element, -2267.09 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2264.86, but should be greater than the previous element, -2264.86 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -566.279, but should be greater than the previous element, -566.279 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -142.273, but should be greater than the previous element, -142.273 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -35.8649, but should be greater than the previous element, -35.8649 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 4.85733e+21, but should be greater than the previous element, 4.85733e+21 (in &#39;/tmp/RtmpPmFSHM/model-581fffb4f.stan&#39;, line 21, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 3 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 1 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 4 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 2 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 3 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 1 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 4 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 2 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 1 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 3 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 4 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 2 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 3 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 1 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 4 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 2 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 3 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 1 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 4 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 1 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 2 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 3 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 4 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 1 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 1 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 2 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 2 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 3 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 3 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 4 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 4 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 2 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 3 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 1 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 4 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 2 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 3 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 3 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 1 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 1 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 4 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 4 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 2 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 2 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 3 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 1 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 4 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 2 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 3 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 1 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 4 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 2 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 3 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 1 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 4 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 2 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 3 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 1 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 4 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 2 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 3 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 1 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 4 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 2 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 3 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 1 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 4 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 2 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 3 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 1 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 4 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 2 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 3 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 1 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 4 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 2 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 3 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 1 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 4 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 2 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 3 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 3 finished in 186.5 seconds.
## Chain 4 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 4 finished in 187.3 seconds.
## Chain 1 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 1 finished in 188.6 seconds.
## Chain 2 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 2 finished in 190.2 seconds.
## 
## All 4 chains finished successfully.
## Mean chain execution time: 188.1 seconds.
## Total execution time: 190.4 seconds.</code></pre>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="homework-week-7.html#cb373-1" aria-hidden="true" tabindex="-1"></a>model1_draws <span class="ot">&lt;-</span> <span class="fu">cmd_draws</span>(model1_sample)</span>
<span id="cb373-2"><a href="homework-week-7.html#cb373-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-3"><a href="homework-week-7.html#cb373-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model1_draws, <span class="at">regex_pars =</span> <span class="st">&#39;beta&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
<pre class="stan"><code>data {
  int N;
  int K;
  int response[N];
  int action[N];
  int intention[N];
  int contact[N];
}
parameters {
    // Cut points are the positions of responses along cumulative odds
  ordered[K] cutpoints;
  real beta_action;
  real beta_intention;
  real beta_contact;
  real beta_intention_contact;
  real beta_intention_action;
}
model {
  vector[N] phi;

    for (i in 1:N) {
        phi[i] = beta_action * action[i] + beta_contact * contact[i] + beta_intention * intention[i] + beta_intention_contact * intention[i] * contact[i]  + beta_intention_action * intention[i] * action[i]
        ;
        response[i] ~ ordered_logistic(phi[i], cutpoints);
    }

  cutpoints ~ normal(0, 1.5);
  beta_action ~ normal(0, 0.5);
  beta_contact ~ normal(0, 0.5);
  beta_intention ~ normal(0, 0.5);
}</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="homework-week-7.html#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model1_interactions_stan &lt;- &#39;model1_interactions.stan&#39;</span></span>
<span id="cb375-2"><a href="homework-week-7.html#cb375-2" aria-hidden="true" tabindex="-1"></a><span class="co"># writeLines(readLines(model1_interactions_stan))</span></span>
<span id="cb375-3"><a href="homework-week-7.html#cb375-3" aria-hidden="true" tabindex="-1"></a><span class="co"># model1_interactions &lt;- cmdstan_model(model1_interactions_stan, cpp_options = list(stan_threads = TRUE))</span></span>
<span id="cb375-4"><a href="homework-week-7.html#cb375-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb375-5"><a href="homework-week-7.html#cb375-5" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb375-6"><a href="homework-week-7.html#cb375-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.list</span>(DT[, .(response, action, intention, contact)]), </span>
<span id="cb375-7"><a href="homework-week-7.html#cb375-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> DT[, .N],</span>
<span id="cb375-8"><a href="homework-week-7.html#cb375-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">K =</span> DT[, <span class="fu">uniqueN</span>(response) <span class="sc">-</span> <span class="dv">1</span>]</span>
<span id="cb375-9"><a href="homework-week-7.html#cb375-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb375-10"><a href="homework-week-7.html#cb375-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb375-11"><a href="homework-week-7.html#cb375-11" aria-hidden="true" tabindex="-1"></a>model1_interactions_sample <span class="ot">&lt;-</span></span>
<span id="cb375-12"><a href="homework-week-7.html#cb375-12" aria-hidden="true" tabindex="-1"></a>    model1_interactions<span class="sc">$</span><span class="fu">sample</span>(</span>
<span id="cb375-13"><a href="homework-week-7.html#cb375-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> model_data,</span>
<span id="cb375-14"><a href="homework-week-7.html#cb375-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">chains =</span> <span class="dv">4</span>,</span>
<span id="cb375-15"><a href="homework-week-7.html#cb375-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">parallel_chains =</span> <span class="dv">4</span>,</span>
<span id="cb375-16"><a href="homework-week-7.html#cb375-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">threads_per_chain =</span> <span class="dv">4</span></span>
<span id="cb375-17"><a href="homework-week-7.html#cb375-17" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code>## Warning: &#39;threads_per_chain&#39; is set but the model was not compiled with &#39;cpp_options =
## list(stan_threads = TRUE)&#39; so &#39;threads_per_chain&#39; will have no effect!</code></pre>
<pre><code>## Running MCMC with 4 parallel chains...
## 
## Chain 1 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2090.46, but should be greater than the previous element, -2090.46 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2090.17, but should be greater than the previous element, -2090.17 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -521.807, but should be greater than the previous element, -521.807 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -130.022, but should be greater than the previous element, -130.022 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -31.8243, but should be greater than the previous element, -31.8243 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 6.77656e+19, but should be greater than the previous element, 6.77656e+19 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 2 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -4036.53, but should be greater than the previous element, -4036.53 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -4036.74, but should be greater than the previous element, -4036.74 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -1006.6, but should be greater than the previous element, -1006.6 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -250.659, but should be greater than the previous element, -250.659 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -61.196, but should be greater than the previous element, -61.196 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -14.0372, but should be greater than the previous element, -14.0372 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -506238, but should be greater than the previous element, -506238 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -14457.5, but should be greater than the previous element, -14457.5 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 3 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3470.77, but should be greater than the previous element, -3470.77 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3471.19, but should be greater than the previous element, -3471.19 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -867.751, but should be greater than the previous element, -867.751 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -217.734, but should be greater than the previous element, -217.734 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -55.0455, but should be greater than the previous element, -55.0455 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 2.07693e+15, but should be greater than the previous element, 2.07693e+15 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 4 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -4172.54, but should be greater than the previous element, -4172.54 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -4170.06, but should be greater than the previous element, -4170.06 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -1041.64, but should be greater than the previous element, -1041.64 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -259.079, but should be greater than the previous element, -259.079 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -63.6723, but should be greater than the previous element, -63.6723 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -14.6763, but should be greater than the previous element, -14.6763 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is 762828, but should be greater than the previous element, 762828 (in &#39;/tmp/RtmpPmFSHM/model-581507a1631.stan&#39;, line 24, column 2 to column 52)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 2 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 1 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 3 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 4 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 1 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 2 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 4 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 3 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 1 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 2 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 4 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 3 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 1 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 2 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 4 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 3 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 1 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 2 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 4 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 3 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 1 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 2 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 4 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 3 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 1 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 2 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 4 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 3 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 1 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 2 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 4 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 3 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 1 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 2 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 4 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 3 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 1 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 1 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 2 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 2 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 4 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 4 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 3 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 3 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 1 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 2 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 4 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 1 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 3 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 2 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 4 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 1 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 2 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 3 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 4 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 1 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 2 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 3 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 4 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 1 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 2 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 4 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 3 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 1 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 2 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 4 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 1 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 3 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 2 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 4 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 1 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 2 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 3 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 4 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 1 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 2 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 3 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 4 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 1 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 1 finished in 265.1 seconds.
## Chain 2 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 2 finished in 266.8 seconds.
## Chain 4 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 4 finished in 269.4 seconds.
## Chain 3 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 3 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 3 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 3 finished in 295.6 seconds.
## 
## All 4 chains finished successfully.
## Mean chain execution time: 274.2 seconds.
## Total execution time: 296.0 seconds.</code></pre>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="homework-week-7.html#cb547-1" aria-hidden="true" tabindex="-1"></a>model1_interactions_draws <span class="ot">&lt;-</span> <span class="fu">cmd_draws</span>(model1_interactions_sample)</span>
<span id="cb547-2"><a href="homework-week-7.html#cb547-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb547-3"><a href="homework-week-7.html#cb547-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model1_interactions_draws, <span class="at">regex_pars =</span> <span class="st">&#39;beta&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="homework-week-7.html#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model1_interactions_draws, <span class="at">regex_pars =</span> <span class="st">&#39;cut&#39;</span>, <span class="at">transformations =</span> inv.logit) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Scale for &#39;x&#39; is already present. Adding another scale for &#39;x&#39;, which will replace the
## existing scale.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-73-2.png" width="672" /></p>
</div>
<div id="model-ordered-categorical-predictors" class="section level3" number="8.0.4">
<h3><span class="header-section-number">8.0.4</span> Model: ordered categorical predictors</h3>
<p>Probability of data: <span class="math inline">\(R_{i} \sim \text{Ordered-logit}(\phi_{i}, K)\)</span></p>
<p>Linear model: <span class="math inline">\(\phi_{i} = \beta_{E} \sum_{j=0}^{E_{i}-1}\delta_{j} + \beta{A_{i}}A_{i} + \beta{I_{i}}I_{i} + \beta{C_{i}}C_{i}\)</span></p>
<p>Prior for each intercept: <span class="math inline">\(K_{k} \sim \text{Normal}(0, 1.5)\)</span>
Prior for each <span class="math inline">\(\beta\)</span>: <span class="math inline">\(\beta_{A}, \beta_{I}, \beta_{C}, \beta_{E}K_{k} \sim \text{Normal}(0, 1)\)</span>
Prior for the <span class="math inline">\(\delta\)</span> vector: <span class="math inline">\(\delta \sim \text{Dirichlet}(\alpha)\)</span></p>
<p>Dirichlet distribution = multivariate extension of the beta distribution. Probabilities between zero and one, that all sum to one. It is parameterized by
pseudo-counts of observations.</p>
<p>The intercept takes the first category, so we add 0 to the sequence of</p>
<p>Make sure to reorder education levels</p>
<pre class="stan"><code>data {
  int N;
  int K;
  int N_edu;
  int response[N];
  int action[N];
  int intention[N];
  int contact[N];
  int education[N];
  vector[N_edu - 1] alpha;
}
parameters {
    // Cut points are the positions of responses along cumulative odds
  ordered[K] cutpoints;
  real beta_action;
  real beta_intention;
  real beta_contact;
  real beta_education;

  // Vector N reals that sum to 1
  simplex[7] delta;
}
model {
  vector[N] phi;
  vector[N_edu] delta_j;

  delta ~ dirichlet(alpha);
  delta_j = append_row(0, delta);

    for (i in 1:N) {
    // add beta education  * sum delta j, up to current i&#39;s education
    phi[i] = beta_education * sum(delta_j[1:education[i]]) +
      beta_action * action[i] +
      beta_contact * contact[i] +
      beta_intention * intention[i];
    response[i] ~ ordered_logistic(phi[i], cutpoints);
    }

  cutpoints ~ normal(0, 1.5);
  beta_action ~ normal(0, 1);
  beta_contact ~ normal(0, 1);
  beta_intention ~ normal(0, 1);
  beta_education ~ normal(0, 1);
}</code></pre>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="homework-week-7.html#cb551-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model2_stan &lt;- &#39;model2.stan&#39;</span></span>
<span id="cb551-2"><a href="homework-week-7.html#cb551-2" aria-hidden="true" tabindex="-1"></a><span class="co"># writeLines(readLines(model2_stan))</span></span>
<span id="cb551-3"><a href="homework-week-7.html#cb551-3" aria-hidden="true" tabindex="-1"></a><span class="co"># model2 &lt;- cmdstan_model(model2_stan, cpp_options = list(stan_threads = TRUE))</span></span>
<span id="cb551-4"><a href="homework-week-7.html#cb551-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb551-5"><a href="homework-week-7.html#cb551-5" aria-hidden="true" tabindex="-1"></a>edu_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>)</span>
<span id="cb551-6"><a href="homework-week-7.html#cb551-6" aria-hidden="true" tabindex="-1"></a>DT[, education <span class="sc">:</span><span class="er">=</span> <span class="fu">as.integer</span>(edu_levels[edu])]</span>
<span id="cb551-7"><a href="homework-week-7.html#cb551-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb551-8"><a href="homework-week-7.html#cb551-8" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb551-9"><a href="homework-week-7.html#cb551-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.list</span>(DT[, .(response, action, intention, contact, education)]), </span>
<span id="cb551-10"><a href="homework-week-7.html#cb551-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> DT[, .N],</span>
<span id="cb551-11"><a href="homework-week-7.html#cb551-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">K =</span> DT[, <span class="fu">uniqueN</span>(response) <span class="sc">-</span> <span class="dv">1</span>],</span>
<span id="cb551-12"><a href="homework-week-7.html#cb551-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">N_edu =</span> DT[, <span class="fu">uniqueN</span>(education)],</span>
<span id="cb551-13"><a href="homework-week-7.html#cb551-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fu">list</span>(<span class="fu">rep</span>(<span class="dv">2</span>, <span class="dv">7</span>))</span>
<span id="cb551-14"><a href="homework-week-7.html#cb551-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb551-15"><a href="homework-week-7.html#cb551-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb551-16"><a href="homework-week-7.html#cb551-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb551-17"><a href="homework-week-7.html#cb551-17" aria-hidden="true" tabindex="-1"></a>model2_sample <span class="ot">&lt;-</span>model2<span class="sc">$</span><span class="fu">sample</span>(</span>
<span id="cb551-18"><a href="homework-week-7.html#cb551-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> model_data,</span>
<span id="cb551-19"><a href="homework-week-7.html#cb551-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">chains =</span> <span class="dv">4</span>,</span>
<span id="cb551-20"><a href="homework-week-7.html#cb551-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">parallel_chains =</span> <span class="dv">4</span>,</span>
<span id="cb551-21"><a href="homework-week-7.html#cb551-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">threads_per_chain =</span> <span class="dv">4</span></span>
<span id="cb551-22"><a href="homework-week-7.html#cb551-22" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## Warning: &#39;threads_per_chain&#39; is set but the model was not compiled with
## &#39;cpp_options = list(stan_threads = TRUE)&#39; so &#39;threads_per_chain&#39; will have no
## effect!</code></pre>
<pre><code>## Running MCMC with 4 parallel chains...
## 
## Chain 1 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3536.27, but should be greater than the previous element, -3536.27 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3538.62, but should be greater than the previous element, -3538.62 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -883.714, but should be greater than the previous element, -883.714 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -220.916, but should be greater than the previous element, -220.916 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -55.4413, but should be greater than the previous element, -55.4413 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -64626.6, but should be greater than the previous element, -64626.6 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -1290, but should be greater than the previous element, -1290 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 2 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3668.57, but should be greater than the previous element, -3668.57 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3670.11, but should be greater than the previous element, -3670.11 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -916.117, but should be greater than the previous element, -916.117 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -228.625, but should be greater than the previous element, -228.625 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -56.6737, but should be greater than the previous element, -56.6737 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -13.7651, but should be greater than the previous element, -13.7651 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 6.23826e+26, but should be greater than the previous element, 6.23826e+26 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 3 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2606.87, but should be greater than the previous element, -2606.87 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2606.94, but should be greater than the previous element, -2606.94 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -650.912, but should be greater than the previous element, -650.912 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -162.97, but should be greater than the previous element, -162.97 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -40.3174, but should be greater than the previous element, -40.3174 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -209470, but should be greater than the previous element, -209470 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -5983.11, but should be greater than the previous element, -5983.11 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -58.5201, but should be greater than the previous element, -58.5201 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 4 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -4184.54, but should be greater than the previous element, -4184.54 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -4185.83, but should be greater than the previous element, -4185.83 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -1044.44, but should be greater than the previous element, -1044.44 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -259.502, but should be greater than the previous element, -259.502 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -63.8404, but should be greater than the previous element, -63.8404 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is -14.6049, but should be greater than the previous element, -14.6049 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -175323, but should be greater than the previous element, -175323 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3495.6, but should be greater than the previous element, -3495.6 (in &#39;/tmp/RtmpRGOmti/model-68612194ce94.stan&#39;, line 36, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 2 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 1 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 4 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 3 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 2 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 4 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 1 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 2 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 3 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 4 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 1 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 2 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 4 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 3 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 1 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 2 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 3 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 4 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 2 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 1 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 4 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 3 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 2 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 1 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 4 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 3 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 2 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 1 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 4 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 3 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 2 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 1 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 4 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 3 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 2 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 2 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 1 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 4 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 4 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 3 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 2 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 1 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 1 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 3 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 3 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 4 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 2 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 3 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 1 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 4 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 3 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 2 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 1 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 4 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 3 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 2 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 1 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 3 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 4 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 2 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 3 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 1 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 4 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 2 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 3 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 1 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 4 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 2 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 3 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 1 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 3 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 4 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 2 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 3 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 1 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 2 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 4 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 3 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 3 finished in 733.5 seconds.
## Chain 1 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 2 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 2 finished in 746.8 seconds.
## Chain 4 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 1 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 4 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 4 finished in 779.5 seconds.
## Chain 1 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 1 finished in 807.2 seconds.
## 
## All 4 chains finished successfully.
## Mean chain execution time: 766.7 seconds.
## Total execution time: 807.4 seconds.</code></pre>
<div class="sourceCode" id="cb718"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb718-1"><a href="homework-week-7.html#cb718-1" aria-hidden="true" tabindex="-1"></a>model2_draws <span class="ot">&lt;-</span> <span class="fu">cmd_draws</span>(model2_sample)</span>
<span id="cb718-2"><a href="homework-week-7.html#cb718-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb718-3"><a href="homework-week-7.html#cb718-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model2_draws, <span class="at">regex_pars =</span> <span class="st">&#39;beta&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
<div class="sourceCode" id="cb719"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb719-1"><a href="homework-week-7.html#cb719-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model2_draws, <span class="at">regex_pars =</span> <span class="st">&#39;delta&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-75-2.png" width="672" /></p>
<div class="sourceCode" id="cb720"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb720-1"><a href="homework-week-7.html#cb720-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model2_draws, <span class="at">regex_pars =</span> <span class="st">&#39;cut&#39;</span>, <span class="at">transformations =</span> inv.logit) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Scale for &#39;x&#39; is already present. Adding another scale for &#39;x&#39;, which will
## replace the existing scale.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-75-3.png" width="672" /></p>
</div>
<div id="question-1-6" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Question 1</h2>
<blockquote>
<p>In the Trolley data—data(Trolley)—we saw how education level (modeled as an
ordered category) is associated with responses. Is this association causal? One
plausible confound is that education is also associated with age, through a
causal process: People are older when they finish school than when they begin
it. Reconsider the Trolley data in this light. Draw a DAG that represents
hypothetical causal relationships among response, education, and age.</p>
</blockquote>
<div class="sourceCode" id="cb722"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb722-1"><a href="homework-week-7.html#cb722-1" aria-hidden="true" tabindex="-1"></a>dag <span class="ot">&lt;-</span> <span class="fu">dagify</span>(</span>
<span id="cb722-2"><a href="homework-week-7.html#cb722-2" aria-hidden="true" tabindex="-1"></a>  response <span class="sc">~</span> education <span class="sc">+</span> age <span class="sc">+</span> action <span class="sc">+</span> intention <span class="sc">+</span> contact,</span>
<span id="cb722-3"><a href="homework-week-7.html#cb722-3" aria-hidden="true" tabindex="-1"></a>  education <span class="sc">~</span> age,</span>
<span id="cb722-4"><a href="homework-week-7.html#cb722-4" aria-hidden="true" tabindex="-1"></a>  contact <span class="sc">~</span> action,</span>
<span id="cb722-5"><a href="homework-week-7.html#cb722-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">&#39;education&#39;</span>,</span>
<span id="cb722-6"><a href="homework-week-7.html#cb722-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">&#39;response&#39;</span></span>
<span id="cb722-7"><a href="homework-week-7.html#cb722-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb722-8"><a href="homework-week-7.html#cb722-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb722-9"><a href="homework-week-7.html#cb722-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dag_plot</span>(dag)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
<div class="sourceCode" id="cb723"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb723-1"><a href="homework-week-7.html#cb723-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adjustmentSets</span>(dag, <span class="at">exposure =</span> <span class="st">&#39;education&#39;</span>, <span class="at">outcome =</span> <span class="st">&#39;response&#39;</span>, <span class="at">effect =</span> <span class="st">&#39;total&#39;</span> )</span></code></pre></div>
<pre><code>## { age }</code></pre>
<p>Which statistical model or models do you need to evaluate the causal influence of
education on responses? Fit these models to the trolley data. What do you
conclude about the causal relationships among these three variables?</p>
<pre class="stan"><code>data {
  int N;
  int K;
  int N_edu;
  int response[N];
  int action[N];
  int intention[N];
  int contact[N];
  int education[N];
  real age[N];
  vector[N_edu - 1] alpha;
}
parameters {
    // Cut points are the positions of responses along cumulative odds
  ordered[K] cutpoints;
  real beta_action;
  real beta_intention;
  real beta_contact;
  real beta_education;
  real beta_age;

  // Vector N reals that sum to 1
  simplex[7] delta;
}
model {
  vector[N] phi;
  vector[N_edu] delta_j;

  delta ~ dirichlet(alpha);
  delta_j = append_row(0, delta);

    for (i in 1:N) {
    // add beta education  * sum delta j, up to current i&#39;s education
    phi[i] = beta_education * sum(delta_j[1:education[i]]) +
      beta_action * action[i] +
      beta_contact * contact[i] +
      beta_age * age[i] +
      beta_intention * intention[i];
    response[i] ~ ordered_logistic(phi[i], cutpoints);
    }

  cutpoints ~ normal(0, 1.5);
  beta_action ~ normal(0, 1);
  beta_contact ~ normal(0, 1);
  beta_intention ~ normal(0, 1);
  beta_education ~ normal(0, 1);
  beta_age ~ normal(0, 1);
}
</code></pre>
<div class="sourceCode" id="cb726"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb726-1"><a href="homework-week-7.html#cb726-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model2_age_stan &lt;- &#39;model2_age.stan&#39;</span></span>
<span id="cb726-2"><a href="homework-week-7.html#cb726-2" aria-hidden="true" tabindex="-1"></a><span class="co"># writeLines(readLines(model2_age_stan))</span></span>
<span id="cb726-3"><a href="homework-week-7.html#cb726-3" aria-hidden="true" tabindex="-1"></a><span class="co"># model2_age &lt;- cmdstan_model(model2_age_stan, cpp_options = list(stan_threads = TRUE))</span></span>
<span id="cb726-4"><a href="homework-week-7.html#cb726-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb726-5"><a href="homework-week-7.html#cb726-5" aria-hidden="true" tabindex="-1"></a>edu_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>)</span>
<span id="cb726-6"><a href="homework-week-7.html#cb726-6" aria-hidden="true" tabindex="-1"></a>DT[, education <span class="sc">:</span><span class="er">=</span> <span class="fu">as.integer</span>(edu_levels[edu])]</span>
<span id="cb726-7"><a href="homework-week-7.html#cb726-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb726-8"><a href="homework-week-7.html#cb726-8" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb726-9"><a href="homework-week-7.html#cb726-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.list</span>(DT[, .(response, action, intention, contact, education, <span class="at">age =</span> <span class="fu">as.numeric</span>(<span class="fu">scale</span>(age)))]), </span>
<span id="cb726-10"><a href="homework-week-7.html#cb726-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> DT[, .N],</span>
<span id="cb726-11"><a href="homework-week-7.html#cb726-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">K =</span> DT[, <span class="fu">uniqueN</span>(response) <span class="sc">-</span> <span class="dv">1</span>],</span>
<span id="cb726-12"><a href="homework-week-7.html#cb726-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">N_edu =</span> DT[, <span class="fu">uniqueN</span>(education)],</span>
<span id="cb726-13"><a href="homework-week-7.html#cb726-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fu">list</span>(<span class="fu">rep</span>(<span class="dv">2</span>, <span class="dv">7</span>))</span>
<span id="cb726-14"><a href="homework-week-7.html#cb726-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb726-15"><a href="homework-week-7.html#cb726-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb726-16"><a href="homework-week-7.html#cb726-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb726-17"><a href="homework-week-7.html#cb726-17" aria-hidden="true" tabindex="-1"></a>model2_sample <span class="ot">&lt;-</span> model2_age<span class="sc">$</span><span class="fu">sample</span>(</span>
<span id="cb726-18"><a href="homework-week-7.html#cb726-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> model_data,</span>
<span id="cb726-19"><a href="homework-week-7.html#cb726-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">chains =</span> <span class="dv">4</span>,</span>
<span id="cb726-20"><a href="homework-week-7.html#cb726-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">parallel_chains =</span> <span class="dv">4</span>,</span>
<span id="cb726-21"><a href="homework-week-7.html#cb726-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">threads_per_chain =</span> <span class="dv">4</span></span>
<span id="cb726-22"><a href="homework-week-7.html#cb726-22" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## Warning: &#39;threads_per_chain&#39; is set but the model was not compiled with
## &#39;cpp_options = list(stan_threads = TRUE)&#39; so &#39;threads_per_chain&#39; will have no
## effect!</code></pre>
<pre><code>## Running MCMC with 4 parallel chains...
## 
## Chain 1 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3774.27, but should be greater than the previous element, -3774.27 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3774.45, but should be greater than the previous element, -3774.45 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -942.907, but should be greater than the previous element, -942.907 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -234.786, but should be greater than the previous element, -234.786 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -57.4411, but should be greater than the previous element, -57.4411 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -158086, but should be greater than the previous element, -158086 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3448.5, but should be greater than the previous element, -3448.5 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 2 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -254.425, but should be greater than the previous element, -254.425 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -252.53, but should be greater than the previous element, -252.53 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 4.44269e+94, but should be greater than the previous element, 4.44269e+94 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 1.18146e+23, but should be greater than the previous element, 1.18146e+23 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 165910, but should be greater than the previous element, 165910 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 3 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -4070.36, but should be greater than the previous element, -4070.36 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -4070.88, but should be greater than the previous element, -4070.88 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -1016.39, but should be greater than the previous element, -1016.39 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -252.758, but should be greater than the previous element, -252.758 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -62.038, but should be greater than the previous element, -62.038 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -14.3382, but should be greater than the previous element, -14.3382 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 4 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -1163.7, but should be greater than the previous element, -1163.7 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -1164.52, but should be greater than the previous element, -1164.52 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -291.31, but should be greater than the previous element, -291.31 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -74.2155, but should be greater than the previous element, -74.2155 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -19.9489, but should be greater than the previous element, -19.9489 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 1.4506e+22, but should be greater than the previous element, 1.4506e+22 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 1.58694e+24, but should be greater than the previous element, 1.58694e+24 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -792710, but should be greater than the previous element, -792710 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -22639.6, but should be greater than the previous element, -22639.6 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -219.351, but should be greater than the previous element, -219.351 (in &#39;/tmp/RtmpRGOmti/model-6861512e622a.stan&#39;, line 39, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 2 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 3 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 1 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 4 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 3 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 2 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 4 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 1 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 3 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 2 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 4 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 1 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 2 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 3 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 1 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 4 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 3 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 2 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 1 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 4 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 3 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 2 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 4 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 1 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 3 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 1 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 4 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 2 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 1 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 4 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 3 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 2 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 1 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 4 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 3 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 3 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 2 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 4 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 4 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 1 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 1 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 2 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 2 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 3 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 4 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 1 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 2 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 3 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 4 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 2 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 1 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 3 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 2 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 4 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 1 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 2 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 3 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 4 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 1 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 2 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 3 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 4 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 2 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 1 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 3 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 4 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 2 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 1 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 2 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 3 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 4 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 1 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 2 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 3 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 4 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 2 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 2 finished in 529.1 seconds.
## Chain 1 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 3 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 4 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 1 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 4 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 4 finished in 560.2 seconds.
## Chain 3 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 3 finished in 560.8 seconds.
## Chain 1 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 1 finished in 573.7 seconds.
## 
## All 4 chains finished successfully.
## Mean chain execution time: 555.9 seconds.
## Total execution time: 573.8 seconds.</code></pre>
<div class="sourceCode" id="cb893"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb893-1"><a href="homework-week-7.html#cb893-1" aria-hidden="true" tabindex="-1"></a>model2_draws <span class="ot">&lt;-</span> <span class="fu">cmd_draws</span>(model2_sample)</span>
<span id="cb893-2"><a href="homework-week-7.html#cb893-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb893-3"><a href="homework-week-7.html#cb893-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model2_draws, <span class="at">regex_pars =</span> <span class="st">&#39;beta&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-78-1.png" width="672" /></p>
<div class="sourceCode" id="cb894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb894-1"><a href="homework-week-7.html#cb894-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model2_draws, <span class="at">regex_pars =</span> <span class="st">&#39;delta&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-78-2.png" width="672" /></p>
<div class="sourceCode" id="cb895"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb895-1"><a href="homework-week-7.html#cb895-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model2_draws, <span class="at">regex_pars =</span> <span class="st">&#39;cut&#39;</span>, <span class="at">transformations =</span> inv.logit) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Scale for &#39;x&#39; is already present. Adding another scale for &#39;x&#39;, which will
## replace the existing scale.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-78-3.png" width="672" /></p>
</div>
<div id="question-2-5" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Question 2</h2>
<blockquote>
<p>Consider one more variable in the Trolley data: Gender. Suppose that gender
might influence education as well as response directly. Draw the DAG now that
includes response, education, age, and gender. Using only the DAG, is it
possible that the inferences from Problem 1 are con founded by gender? If so,
define any additional models you need to infer the causal influence of education
on response. What do you conclude?</p>
</blockquote>
<div class="sourceCode" id="cb897"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb897-1"><a href="homework-week-7.html#cb897-1" aria-hidden="true" tabindex="-1"></a>dag <span class="ot">&lt;-</span> <span class="fu">dagify</span>(</span>
<span id="cb897-2"><a href="homework-week-7.html#cb897-2" aria-hidden="true" tabindex="-1"></a>  response <span class="sc">~</span> education <span class="sc">+</span> age <span class="sc">+</span> gender <span class="sc">+</span> action <span class="sc">+</span> intention <span class="sc">+</span> contact,</span>
<span id="cb897-3"><a href="homework-week-7.html#cb897-3" aria-hidden="true" tabindex="-1"></a>  education <span class="sc">~</span> age,</span>
<span id="cb897-4"><a href="homework-week-7.html#cb897-4" aria-hidden="true" tabindex="-1"></a>  education <span class="sc">~</span> gender,</span>
<span id="cb897-5"><a href="homework-week-7.html#cb897-5" aria-hidden="true" tabindex="-1"></a>  contact <span class="sc">~</span> action,</span>
<span id="cb897-6"><a href="homework-week-7.html#cb897-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">&#39;education&#39;</span>,</span>
<span id="cb897-7"><a href="homework-week-7.html#cb897-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">&#39;response&#39;</span></span>
<span id="cb897-8"><a href="homework-week-7.html#cb897-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb897-9"><a href="homework-week-7.html#cb897-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb897-10"><a href="homework-week-7.html#cb897-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dag_plot</span>(dag)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-79-1.png" width="672" /></p>
<div class="sourceCode" id="cb898"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb898-1"><a href="homework-week-7.html#cb898-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adjustmentSets</span>(dag, <span class="at">exposure =</span> <span class="st">&#39;education&#39;</span>, <span class="at">outcome =</span> <span class="st">&#39;response&#39;</span>, <span class="at">effect =</span> <span class="st">&#39;total&#39;</span> )</span></code></pre></div>
<pre><code>## { age, gender }</code></pre>
<pre class="stan"><code>data {
  int N;
  int K;
  int N_edu;
  int response[N];
  int action[N];
  int intention[N];
  int contact[N];
  int education[N];
  real age[N];
  int gender[N];
  vector[N_edu - 1] alpha;
}
parameters {
    // Cut points are the positions of responses along cumulative odds
  ordered[K] cutpoints;
  real beta_action;
  real beta_intention;
  real beta_contact;
  real beta_education;
  real beta_age;
  real beta_gender;

  // Vector N reals that sum to 1
  simplex[7] delta;
}
model {
  vector[N] phi;
  vector[N_edu] delta_j;

  delta ~ dirichlet(alpha);
  delta_j = append_row(0, delta);

    for (i in 1:N) {
    // add beta education  * sum delta j, up to current i&#39;s education
    phi[i] = beta_education * sum(delta_j[1:education[i]]) +
      beta_action * action[i] +
      beta_contact * contact[i] +
      beta_age * age[i] +
      beta_gender * gender[i] +
      beta_intention * intention[i];
    response[i] ~ ordered_logistic(phi[i], cutpoints);
    }

  cutpoints ~ normal(0, 1.5);
  beta_action ~ normal(0, 1);
  beta_contact ~ normal(0, 1);
  beta_intention ~ normal(0, 1);
  beta_education ~ normal(0, 1);
  beta_age ~ normal(0, 1);
  beta_gender ~ normal(0, 1);
}</code></pre>
<div class="sourceCode" id="cb901"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb901-1"><a href="homework-week-7.html#cb901-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model2_gender_stan &lt;- &#39;model2_gender.stan&#39;</span></span>
<span id="cb901-2"><a href="homework-week-7.html#cb901-2" aria-hidden="true" tabindex="-1"></a><span class="co"># writeLines(readLines(model2_gender_stan))</span></span>
<span id="cb901-3"><a href="homework-week-7.html#cb901-3" aria-hidden="true" tabindex="-1"></a><span class="co"># model2_gender &lt;- cmdstan_model(model2_gender_stan, cpp_options = list(stan_threads = TRUE))</span></span>
<span id="cb901-4"><a href="homework-week-7.html#cb901-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb901-5"><a href="homework-week-7.html#cb901-5" aria-hidden="true" tabindex="-1"></a>edu_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">3</span>)</span>
<span id="cb901-6"><a href="homework-week-7.html#cb901-6" aria-hidden="true" tabindex="-1"></a>DT[, education <span class="sc">:</span><span class="er">=</span> <span class="fu">as.integer</span>(edu_levels[edu])]</span>
<span id="cb901-7"><a href="homework-week-7.html#cb901-7" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb901-8"><a href="homework-week-7.html#cb901-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.list</span>(DT[, .(response, action, intention, contact, education, <span class="at">age =</span> <span class="fu">as.numeric</span>(<span class="fu">scale</span>(age)), <span class="at">gender =</span> <span class="fu">ifelse</span>(male <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>))]), </span>
<span id="cb901-9"><a href="homework-week-7.html#cb901-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> DT[, .N],</span>
<span id="cb901-10"><a href="homework-week-7.html#cb901-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">K =</span> DT[, <span class="fu">uniqueN</span>(response) <span class="sc">-</span> <span class="dv">1</span>],</span>
<span id="cb901-11"><a href="homework-week-7.html#cb901-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">N_edu =</span> DT[, <span class="fu">uniqueN</span>(education)],</span>
<span id="cb901-12"><a href="homework-week-7.html#cb901-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fu">list</span>(<span class="fu">rep</span>(<span class="dv">2</span>, <span class="dv">7</span>))</span>
<span id="cb901-13"><a href="homework-week-7.html#cb901-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb901-14"><a href="homework-week-7.html#cb901-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb901-15"><a href="homework-week-7.html#cb901-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb901-16"><a href="homework-week-7.html#cb901-16" aria-hidden="true" tabindex="-1"></a>model2_gender_sample <span class="ot">&lt;-</span> model2_gender<span class="sc">$</span><span class="fu">sample</span>(</span>
<span id="cb901-17"><a href="homework-week-7.html#cb901-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> model_data,</span>
<span id="cb901-18"><a href="homework-week-7.html#cb901-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">chains =</span> <span class="dv">4</span>,</span>
<span id="cb901-19"><a href="homework-week-7.html#cb901-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">parallel_chains =</span> <span class="dv">4</span>,</span>
<span id="cb901-20"><a href="homework-week-7.html#cb901-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">threads_per_chain =</span> <span class="dv">4</span></span>
<span id="cb901-21"><a href="homework-week-7.html#cb901-21" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## Warning: &#39;threads_per_chain&#39; is set but the model was not compiled with
## &#39;cpp_options = list(stan_threads = TRUE)&#39; so &#39;threads_per_chain&#39; will have no
## effect!</code></pre>
<pre><code>## Running MCMC with 4 parallel chains...
## 
## Chain 1 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2324.5, but should be greater than the previous element, -2324.5 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2324.78, but should be greater than the previous element, -2324.78 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -581.396, but should be greater than the previous element, -581.396 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -146.306, but should be greater than the previous element, -146.306 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -37.2032, but should be greater than the previous element, -37.2032 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -9.91262, but should be greater than the previous element, -9.91262 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -165253, but should be greater than the previous element, -165253 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -4719.28, but should be greater than the previous element, -4719.28 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 1 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 1 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -47.0655, but should be greater than the previous element, -47.0655 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 1 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 1 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 1</code></pre>
<pre><code>## Chain 2 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3013.58, but should be greater than the previous element, -3013.58 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -3014.92, but should be greater than the previous element, -3014.92 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -753.918, but should be greater than the previous element, -753.918 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -188.41, but should be greater than the previous element, -188.41 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -47.3544, but should be greater than the previous element, -47.3544 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is -11.9916, but should be greater than the previous element, -11.9916 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 2 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 2 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 6 is 8.03248e+23, but should be greater than the previous element, 8.03248e+23 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 2 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 2 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 2</code></pre>
<pre><code>## Chain 3 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2095.29, but should be greater than the previous element, -2095.29 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2095.71, but should be greater than the previous element, -2095.71 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -524.599, but should be greater than the previous element, -524.599 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -132.174, but should be greater than the previous element, -132.174 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 4 is -32.2111, but should be greater than the previous element, -32.2111 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 3 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 3 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 5 is 4.50574e+11, but should be greater than the previous element, 4.50574e+11 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 3 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 3 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 3</code></pre>
<pre><code>## Chain 4 Iteration:    1 / 2000 [  0%]  (Warmup)</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2884.03, but should be greater than the previous element, -2884.03 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -2886.16, but should be greater than the previous element, -2886.16 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -721.576, but should be greater than the previous element, -721.576 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -180.649, but should be greater than the previous element, -180.649 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 2 is -45.7997, but should be greater than the previous element, -45.7997 (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 4 Informational Message: The current Metropolis proposal is about to be rejected because of the following issue:</code></pre>
<pre><code>## Chain 4 Exception: ordered_logistic: Cut-points is not a valid ordered vector. The element at 3 is inf, but should be greater than the previous element, inf (in &#39;/tmp/Rtmp2apNfn/model-882773fa8dbf.stan&#39;, line 42, column 4 to column 54)</code></pre>
<pre><code>## Chain 4 If this warning occurs sporadically, such as for highly constrained variable types like covariance matrices, then the sampler is fine,</code></pre>
<pre><code>## Chain 4 but if this warning occurs often then your model may be either severely ill-conditioned or misspecified.</code></pre>
<pre><code>## Chain 4</code></pre>
<pre><code>## Chain 1 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 2 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 4 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 3 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 1 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 2 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 4 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 1 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 3 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 2 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 1 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 4 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 3 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 2 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 1 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 4 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 3 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 2 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 1 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 4 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 3 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 1 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 2 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 4 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 3 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 1 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 2 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 4 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 1 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 3 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 2 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 4 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 3 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 2 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 1 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 1 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 4 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 3 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 1 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 2 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 2 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 4 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 4 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 3 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 3 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 1 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 4 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 2 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 3 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 1 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 4 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 3 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 2 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 1 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 4 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 3 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 2 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 4 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 1 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 3 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 4 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 1 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 2 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 3 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 4 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 1 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 2 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 3 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 4 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 1 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 3 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 4 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 2 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 1 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 3 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 4 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 1 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 1 finished in 709.1 seconds.
## Chain 2 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 3 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 4 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 4 finished in 721.1 seconds.
## Chain 3 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 3 finished in 739.7 seconds.
## Chain 2 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 2 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 2 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 2 finished in 799.4 seconds.
## 
## All 4 chains finished successfully.
## Mean chain execution time: 742.3 seconds.
## Total execution time: 799.5 seconds.</code></pre>
<div class="sourceCode" id="cb1073"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1073-1"><a href="homework-week-7.html#cb1073-1" aria-hidden="true" tabindex="-1"></a>model2_gender_draws <span class="ot">&lt;-</span> <span class="fu">cmd_draws</span>(model2_gender_sample)</span>
<span id="cb1073-2"><a href="homework-week-7.html#cb1073-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1073-3"><a href="homework-week-7.html#cb1073-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model2_gender_draws, <span class="at">regex_pars =</span> <span class="st">&#39;beta&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<div class="sourceCode" id="cb1074"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1074-1"><a href="homework-week-7.html#cb1074-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model2_gender_draws, <span class="at">regex_pars =</span> <span class="st">&#39;delta&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-80-2.png" width="672" /></p>
<div class="sourceCode" id="cb1075"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1075-1"><a href="homework-week-7.html#cb1075-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mcmc_areas</span>(model2_gender_draws, <span class="at">regex_pars =</span> <span class="st">&#39;cut&#39;</span>, <span class="at">transformations =</span> inv.logit) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Scale for &#39;x&#39; is already present. Adding another scale for &#39;x&#39;, which will
## replace the existing scale.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-80-3.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="homework-week-6.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="homework-week-8.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
